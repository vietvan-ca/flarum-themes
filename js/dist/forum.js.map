{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@vietvan-ca/flarum-themes/webpack/bootstrap","webpack://@vietvan-ca/flarum-themes/webpack/runtime/compat get default export","webpack://@vietvan-ca/flarum-themes/webpack/runtime/define property getters","webpack://@vietvan-ca/flarum-themes/webpack/runtime/hasOwnProperty shorthand","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/app']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/extend']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/Button']\"","webpack://@vietvan-ca/flarum-themes/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@vietvan-ca/flarum-themes/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/Component']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/Link']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@vietvan-ca/flarum-themes/./src/forum/components/TopicColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ReplyColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ViewColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/utils/discussionHelpers.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ActivityColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/LastUsersColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomDiscussionRow.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/DiscussionListHeader.js","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/Search']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomMobileDiscussionToolbar.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/HeroSection.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/Logo.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomDiscussionTabNavigation.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomMobileDrawer.js","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@vietvan-ca/flarum-themes/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderPrimary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport icon from 'flarum/common/helpers/icon';\n\n/**\n * Renders the topic column with title, tags, and excerpt\n */\nexport default class TopicColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const firstPost = discussion.firstPost();\n    const tags = discussion.tags() || [];\n    \n    // Get sticky and locked status\n    const isSticky = discussion.isSticky();\n    const isLocked = discussion.isLocked();\n    \n    return m('div.discussion-topic', [\n      m('div.discussion-badges', [\n        // Display sticky and locked badges if applicable\n        isSticky ? m('span.Badge.Badge--sticky', [\n          icon('fas fa-thumbtack')\n        ]) : null,\n        isLocked ? m('span.Badge.Badge--locked', [\n          icon('fas fa-lock'),\n        ]) : null,\n      ]),\n      m('div.discussion-title', [\n        m(Link, { \n          href: app.route.discussion(discussion) \n        }, discussion.title())\n      ]),\n      m('div.discussion-tags', [\n        tags.map(tag => m('span.discussion-tag', { \n          className: tag.color() ? 'colored' : '',\n          style: tag.color() ? { backgroundColor: tag.color() } : {}\n        }, tag.name())),\n      ]),\n      app.forum.attribute('custom-discussion-list.enable_excerpts') !== false ? \n        m('div.discussion-excerpt', firstPost?.contentPlain() || '') : null\n    ]);\n  }\n}","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\n/**\n * Renders the reply count column\n */\nexport default class ReplyColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const replyCount = discussion.replyCount() ?? 0;\n\n    return m('div.discussion-reply', [\n      m('span', replyCount),\n    ]);\n  }\n}\n","import Component from 'flarum/common/Component';\n\n/**\n * Renders the view count column\n */\nexport default class ViewColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const viewCount = discussion.attribute('views') || 0;\n    \n    return m('div.discussion-view', [\n      m('span', viewCount)\n    ]);\n  }\n}","/**\n * Helper function to calculate time since in days\n */\nexport function getTimeSince(date) {\n  if (!date) return '-';\n\n  // Convert to Date object if string\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n  // Check if date is valid\n  if (isNaN(dateObj.getTime())) return '-';\n\n  const now = new Date();\n  const diffTime = now - dateObj;\n\n  // If time is in the future, return placeholder\n  if (diffTime < 0) return '-';\n\n  // Calculate time differences\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n  const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));\n\n  // Return only the largest time unit\n  if (diffDays >= 30) {\n    // More than a month, show months\n    const diffMonths = Math.floor(diffDays / 30);\n    return diffMonths + 'mo';\n  }\n\n  if (diffDays > 0) {\n    return diffDays + 'd';\n  }\n\n  if (diffHours > 0) {\n    return diffHours + 'h';\n  }\n\n  if (diffMinutes > 0) {\n    return diffMinutes + 'm';\n  }\n\n  // If less than a minute\n  return 'now';\n}\n\n/**\n * Helper function to get user initials\n */\nexport function getInitials(username) {\n  if (!username) return '';\n  return username.charAt(0).toUpperCase();\n}\n\n/**\n * Helper function to get color class based on index\n */\nexport function getColorClass(index) {\n  const colorClasses = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5'];\n  return colorClasses[index % colorClasses.length];\n}\n\n/**\n * Renders user avatar with either image or initials\n */\nexport function renderUserAvatar(user, index) {\n  if (!user) return null;\n\n  const userName = user.username || '';\n  const avatarUrl = user.avatar_url;\n\n  if (avatarUrl) {\n    // If avatar URL exists, render the image\n    return m(\n      'span.user-avatar',\n      { title: userName },\n      m('img.avatar-image', {\n        src: avatarUrl,\n        alt: userName,\n      })\n    );\n  } else {\n    // If no avatar URL, show initials with color background\n    return m(\n      'span.user-avatar',\n      { title: userName },\n      m(\n        'span.user-initial',\n        {\n          className: getColorClass(index),\n        },\n        getInitials(userName)\n      )\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport { getTimeSince } from '../utils/discussionHelpers';\n\n/**\n * Renders the activity column with time since last post and active users\n */\nexport default class ActivityColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const lastPostedAt = discussion.lastPostedAt();\n    const timeSince = lastPostedAt ? getTimeSince(new Date(lastPostedAt)) : '';\n\n    return m('div.discussion-activity', [m('span', timeSince)]);\n  }\n}\n","import Component from 'flarum/common/Component';\nimport { renderUserAvatar } from '../utils/discussionHelpers';\n\n/**\n * Renders the activity column with time since last post and active users\n */\nexport default class LastUsersColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const latestPosters = discussion.attribute('latestPosters') || [];\n    \n    return m('div.discussion-users', [\n      m('div.active-users', latestPosters.slice(0, 5).map((user, i) => \n        renderUserAvatar(user, i)\n      ))\n    ]);\n  }\n}","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport TopicColumn from './TopicColumn';\nimport ReplyColumn from './ReplyColumn';\nimport ViewColumn from './ViewColumn';\nimport ActivityColumn from './ActivityColumn';\nimport LastUsersColumn from './LastUsersColumn';\n\n/**\n * The main row component for discussions in the discussion list\n */\nexport default class CustomDiscussionRow extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n\n    return m(Link, {\n      className: 'discussion-row',\n      href: app.route.discussion(discussion),\n    }, [\n      m(TopicColumn, { discussion }),\n      m(LastUsersColumn, { discussion }),\n      m(ReplyColumn, { discussion }),\n      m(ViewColumn, { discussion }),\n      m(ActivityColumn, { discussion }),\n    ]);\n  }\n}\n","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\n\n\n/**\n * Renders the header for the discussion list\n */\n\nexport default class DiscussionListHeader extends Component {\n  view() {\n    return (\n      <li className=\"CustomDiscussionList-header\">\n        <div className=\"DiscussionListItem-info topic\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.topic')}\n        </div>\n        <div className=\"DiscussionListItem-info replies\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.replies')}\n        </div>\n        <div className=\"DiscussionListItem-info views\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.views')}\n        </div>\n        <div className=\"DiscussionListItem-info activity\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.activity')}\n        </div>\n      </li>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Search'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LogInModal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Button from 'flarum/common/components/Button';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport listItems from 'flarum/common/helpers/listItems';\n\nexport default class CustomMobileDiscussionToolbar extends Component {\n  view() {\n    return (\n      <div className=\"CustomMobileDiscussionToolbar\">\n        {/* Toggle Discussion List Button */}\n        <div className=\"CustomMobileDiscussionToolbar-left\">\n          <span className=\"CustomMobileDiscussionToolbar-date\">{this.currentDate}</span>\n          {SelectDropdown.component(\n            {\n              buttonClassName: 'Button Button--text',\n              className: 'all-discussion-select',\n            },\n            this.getNavigationItems().toArray()\n          )}\n        </div>\n\n        {/* Start Discussion Button */}\n        <button\n          class=\"Button Button--primary CustomMobileDiscussionToolbar-button\"\n          type=\"button\"\n          aria-label=\"Start Discussion\"\n          onclick={() => this.newDiscussionAction()}\n        >\n          <i aria-hidden=\"true\" class=\"icon fas fa-edit Button-icon\"></i>\n          <span class=\"Button-label\">\n            {app.translator.trans('core.forum.index.start_discussion_button')}\n          </span>\n        </button>\n      </div>\n    );\n  }\n\n  getNavigationItems() {\n    const items = new ItemList();\n\n    // All Discussions\n    items.add(\n      'all-discussions',\n      LinkButton.component(\n        {\n          href: app.route('index'),\n          icon: 'fas fa-comments',\n        },\n        app.translator.trans('core.forum.index.all_discussions_link')\n      ),\n      100\n    );\n\n    // Tags\n    items.add(\n      'tags',\n      LinkButton.component(\n        {\n          href: app.route('tags'),\n          icon: 'fas fa-th-large',\n        },\n        app.translator.trans('flarum-tags.forum.index.tags_link')\n      ),\n      90\n    );\n\n    // Get all tags from the store\n    const allTags = app.store.all('tags');\n\n    if (allTags && allTags.length > 0) {\n      // Filter and sort primary tags\n      const primaryTags = allTags\n        .filter((tag) => {\n          // Only show primary tags (no parent)\n          const hasParent = tag.parent && tag.parent();\n          const position = tag.position();\n          // Include tags that don't have a parent and have a position\n          return !hasParent && position !== null && position !== undefined;\n        })\n        .sort((a, b) => a.position() - b.position());\n\n      // Add each tag to the dropdown\n      primaryTags.forEach((tag, index) => {\n        items.add(\n          `tag-${tag.id()}`,\n          LinkButton.component(\n            {\n              href: app.route('tag', { tags: tag.slug() }),\n              icon: 'fas fa-circle',\n              style: tag.color() ? { color: tag.color() } : {},\n            },\n            tag.name()\n          ),\n          80 - index\n        );\n      });\n    }\n\n    return items;\n  }\n\n  newDiscussionAction() {\n    return new Promise((resolve, reject) => {\n      if (app.session.user) {\n        app.composer.load(DiscussionComposer, { user: app.session.user });\n        app.composer.show();\n\n        return resolve(app.composer);\n      } else {\n        app.modal.show(LogInModal);\n\n        return reject();\n      }\n    });\n  }\n}\n","import Component from 'flarum/common/Component';\nimport Search from 'flarum/forum/components/Search';\nimport CustomMobileDiscussionToolbar from './CustomMobileDiscussionToolbar';\n\nexport default class HeroSection extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    const forum = app.forum;\n    // enabled?\n    this.enabled = forum.attribute('vietvan_ca_hero_enabled') === '1';\n    if (!this.enabled) return;\n\n    // Initial mode - start with light as default\n    this.mode = 'light';\n\n    // Setup listeners first\n    if (flarum.extensions['fof-nightmode']) {\n      this.setupNightModeListener();\n    }\n    this.setupSystemModeListener();\n    this.setupBodyClassObserver();\n\n    // Compute actual mode after a delay to ensure theme has initialized\n    setTimeout(() => {\n      this.mode = this.computeMode();\n      m.redraw();\n    }, 100);\n\n    // Re-check mode after a longer delay (in case FoF extension hasn't initialized yet)\n    setTimeout(() => {\n      const newMode = this.computeMode();\n      if (newMode !== this.mode) {\n        this.mode = newMode;\n        m.redraw();\n      }\n    }, 500);\n\n    // locale-specific text\n    this.locale = app.translator.getLocale() || 'en';\n    const titleKey = `vietvan_ca_hero_title_${this.locale}`;\n    const descKey = `vietvan_ca_hero_description_${this.locale}`;\n\n    this.title = forum.attribute(titleKey) ?? app.translator.trans('vietvan-ca-flarum-themes.forum.hero.title');\n    this.description = forum.attribute(descKey) ?? app.translator.trans('vietvan-ca-flarum-themes.forum.hero.description');\n\n    // show or hide text overlay?\n    this.showText = forum.attribute('vietvan_ca_hero_show_text') === '1';\n\n    // has custom text color?\n    this.hasCustomColor = forum.attribute('vietvan_ca_hero_custom_color_enabled') === '1';\n    this.titleStyle = {};\n    this.descriptionStyle = {};\n\n    if (this.hasCustomColor) {\n      const titleColor = forum.attribute('vietvan_ca_hero_title_color') || '#ffffff';\n      const subtitleColor = forum.attribute('vietvan_ca_hero_subtitle_color') || '#ffffff';\n\n      this.titleStyle = { color: titleColor };\n      this.descriptionStyle = { color: subtitleColor };\n    }\n  }\n\n  computeMode() {\n    // First, check if FoF Night Mode is active by checking the body class\n    // This is the most reliable way to detect actual dark mode state\n    if (document.body.classList.contains('flarum--night')) {\n      return 'dark';\n    }\n\n    // Check if user is logged in\n    const user = app.session.user;\n\n    if (user) {\n      // Logged in: use user preference from FoF Night Mode\n      const pref = user.preferences().fofNightMode;\n      // FoF Night Mode stores as integers: 0 = auto, 1 = light, 2 = dark\n      if (pref === 2 || pref === '2') return 'dark';\n      if (pref === 1 || pref === '1') return 'light';\n      if (pref === 0 || pref === '0' || pref === null || pref === undefined) {\n        // For auto/null preferences, default to light mode (respecting our default theme setting)\n        // Only use system preference if user explicitly wants auto mode\n        const isExplicitAuto = pref === 0 || pref === '0';\n        if (isExplicitAuto) {\n          return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n        }\n        // Default to light for null/undefined (new users)\n        return 'light';\n      }\n      return 'light';\n    }\n\n    // Guest: check cookie\n    const cookieValue = document.cookie\n      .split('; ')\n      .find((row) => row.startsWith('flarum_nightmode='))\n      ?.split('=')[1];\n\n    if (cookieValue === '2') return 'dark';\n    if (cookieValue === '1') return 'light';\n    if (cookieValue === '0') {\n      // Explicit system preference\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    \n    // No cookie found - default to light mode (respecting our default theme setting)\n    return 'light';\n  }\n\n  setupNightModeListener() {\n    this.nightModeHandler = (event) => {\n      this.mode = event.detail === 'day' ? 'light' : 'dark';\n      m.redraw();\n    };\n    document.addEventListener('fofnightmodechange', this.nightModeHandler);\n  }\n\n  setupSystemModeListener() {\n    // Listen to OS-level dark mode changes\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    this.systemModeHandler = (e) => {\n      const newMode = this.computeMode();\n      if (newMode !== this.mode) {\n        this.mode = newMode;\n        m.redraw();\n      }\n    };\n    mediaQuery.addEventListener('change', this.systemModeHandler);\n  }\n\n  setupBodyClassObserver() {\n    // Watch for changes to body class (when FoF Night Mode toggles)\n    this.bodyObserver = new MutationObserver(() => {\n      const newMode = this.computeMode();\n      if (newMode !== this.mode) {\n        this.mode = newMode;\n        m.redraw();\n      }\n    });\n\n    this.bodyObserver.observe(document.body, {\n      attributes: true,\n      attributeFilter: ['class'],\n    });\n  }\n\n  onremove() {\n    // Clean up listeners\n    if (this.nightModeHandler) {\n      document.removeEventListener('fofnightmodechange', this.nightModeHandler);\n    }\n    if (this.systemModeHandler) {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      mediaQuery.removeEventListener('change', this.systemModeHandler);\n    }\n    if (this.bodyObserver) {\n      this.bodyObserver.disconnect();\n    }\n  }\n\n  getBackgroundStyle() {\n    const forum = app.forum;\n    const bgAttr = this.mode === 'dark' ? 'vietvan_ca_hero_background_image_darkUrl' : 'vietvan_ca_hero_background_imageUrl';\n    const bgUrl = forum.attribute(bgAttr);\n\n    return bgUrl\n      ? {\n          height: '35vh',\n          backgroundImage: `url(${bgUrl})`,\n          backgroundPosition: 'center',\n          backgroundSize: 'cover',\n          backgroundRepeat: 'no-repeat',\n        }\n      : undefined;\n  }\n\n  view() {\n    // Don't render if not enabled\n    if (!this.enabled) return null;\n\n    // Only show on the homepage (root path)\n    const currentPath = window.location.pathname;\n    if (currentPath !== '/' && currentPath !== '') return null;\n\n    // Get background style dynamically on each render\n    const backgroundStyle = this.getBackgroundStyle();\n\n    return (\n      <div className=\"HeroSection\" style={backgroundStyle}>\n        {this.showText && (\n          <div className=\"container\">\n            <h1 className=\"HeroSection-title\" style={this.titleStyle}>\n              {this.title}\n            </h1>\n            <p className=\"HeroSection-subtitle\" style={this.descriptionStyle}>\n              {this.description}\n            </p>\n          </div>\n        )}\n        <div className=\"container\">\n          <Search state={app.search} />\n        </div>\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nexport default class Logo extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.mode = app.session.user?.preferences().fofNightMode === 2 ? 'dark' : 'light';\n    \n    if (flarum.extensions['fof-nightmode']) {\n      this.setupNightModeListener();\n    }\n  }\n\n  setupNightModeListener() {\n    document.addEventListener('fofnightmodechange', (event) => {\n      this.mode = event.detail === 'day' ? 'light' : 'dark';\n      m.redraw();\n    });\n  }\n\n  view(vnode) {\n    const logoAttr = this.mode === 'dark' ? 'vietvan_ca_logo_darkUrl' : 'vietvan_ca_logoUrl';\n    const logoUrl = app.forum.attribute(logoAttr);\n\n    if (!logoUrl) return null;\n\n    const customUrl = app.forum.attribute('vietvan_ca_back_button_custom_url') || app.route('index');\n    const imageStyle = vnode.attrs.imageStyle || {};\n\n    return (\n      <a href={customUrl} className=\"Header-logo CustomHeaderLogo\">\n        <img src={logoUrl} alt={'VietVan CA'} style={imageStyle} />\n      </a>\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport app from 'flarum/forum/app';\n\nexport default class CustomDiscussionTabNavigation extends Component {\n  view() {\n    const currentSort = app.search.params()?.sort;\n\n    const tabs = [\n      { key: 'latest', label: app.translator.trans('core.forum.index_sort.latest_button'), sortParam: '', default: true },\n      { key: 'top', label: app.translator.trans('core.forum.index_sort.top_button'), sortParam: 'top' },\n      { key: 'newest', label: app.translator.trans('core.forum.index_sort.newest_button'), sortParam: 'newest' },\n      { key: 'oldest', label: app.translator.trans('core.forum.index_sort.oldest_button'), sortParam: 'oldest' },\n    ];\n\n    return (\n      <div className=\"CustomDiscussionTabNavigation\">\n        {tabs.map((tab) => {\n          let isActive = false;\n          if (tab.routeName) {\n            isActive = app.current.matches(tab.routeName);\n          } else if (tab.isFilter) {\n            isActive = app.search.params.q && app.search.params.q.includes(tab.filterParam);\n          } else {\n            isActive = currentSort === tab.sortParam || (!currentSort && tab.default);\n          }\n\n          return (\n            <LinkButton className={`SortItem Button Button--link ${isActive ? 'active' : ''}`} onclick={() => this.navigateTo(tab)}>\n              {tab.label}\n            </LinkButton>\n          );\n        })}\n      </div>\n    );\n  }\n\n  navigateTo(tab) {\n    // 1. Get the current URL path (e.g., /t/general?sort=newest)\n    const currentPath = m.route.get();\n\n    // 2. Remove any existing query parameters by splitting the string at the '?'\n    const basePath = currentPath.split('?')[0]; // Result: /t/general\n\n    // 3. Build the new URL path string\n    let newPath = basePath;\n    if (!tab.default) {\n      // Add the sort parameter if this tab is not the default one\n      newPath += '?sort=' + tab.sortParam;\n    }\n\n    // 4. Use m.route.set() to navigate to the new URL without a full page reload\n    m.route.set(newPath);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Separator from 'flarum/common/components/Separator';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Logo from './Logo';\n\n/**\n * Helper to get translation with fallback\n */\nfunction trans(key, fallback) {\n  const result = app.translator.trans(`vietvan-ca-flarum-themes.forum.mobile_drawer.${key}`);\n  if (result && result !== `vietvan-ca-flarum-themes.forum.mobile_drawer.${key}`) {\n    return result;\n  }\n  return fallback;\n}\n\n/**\n * Custom Mobile Drawer component that matches VietVan main website sidebar\n */\nexport default class CustomMobileDrawer extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n\n  view() {\n    return (\n      <div className=\"CustomMobileDrawer\">\n        {/* Logo Section */}\n        <div className=\"CustomMobileDrawer-logo\">\n          <Logo imageStyle={{ height: '40px' }} />\n        </div>\n\n        {/* Navigation Menu */}\n        <nav className=\"CustomMobileDrawer-nav\">\n          <ul className=\"CustomMobileDrawer-menu\">\n            {listItems(this.menuItems().toArray())}\n          </ul>\n        </nav>\n\n        {/* Separator */}\n        <div className=\"CustomMobileDrawer-separator\"></div>\n\n        {/* Auth Section */}\n        <div className=\"CustomMobileDrawer-auth\">\n          {app.session.user ? this.loggedInSection() : this.guestSection()}\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Build menu items for navigation\n   */\n  menuItems() {\n    const items = new ItemList();\n    const mainSiteUrl = app.forum.attribute('vietvan_ca_back_button_custom_url') || app.forum.attribute('baseUrl').replace('/forum', '');\n\n    // Trang Ch (Home)\n    items.add('home',\n      <li className=\"CustomMobileDrawer-menuItem\">\n        <a href={mainSiteUrl} className=\"CustomMobileDrawer-link\">\n          {trans('home', 'Trang Ch')}\n        </a>\n      </li>,\n      100\n    );\n\n    // Din n (Forum) - Active\n    items.add('forum',\n      <li className=\"CustomMobileDrawer-menuItem active\">\n        <a href={app.forum.attribute('baseUrl')} className=\"CustomMobileDrawer-link\">\n          {trans('forum', 'Din n')}\n        </a>\n      </li>,\n      90\n    );\n\n    // Lu  (Notes/Guidelines)\n    const guidelinesTag = this.findTagBySlug('luu-y') || this.findTagBySlug('guidelines');\n    if (guidelinesTag) {\n      items.add('guidelines',\n        <li className=\"CustomMobileDrawer-menuItem\">\n          <a href={app.route('tag', { tags: guidelinesTag.slug() })} className=\"CustomMobileDrawer-link\">\n            {trans('guidelines', 'Lu ')}\n          </a>\n        </li>,\n        80\n      );\n    }\n\n    // Language Selector\n    items.add('language',\n      <li className=\"CustomMobileDrawer-menuItem CustomMobileDrawer-menuItem--dropdown\">\n        {this.languageDropdown()}\n      </li>,\n      70\n    );\n\n    // Theme/Appearance Toggle\n    items.add('theme',\n      <li className=\"CustomMobileDrawer-menuItem CustomMobileDrawer-menuItem--dropdown\">\n        {this.themeToggle()}\n      </li>,\n      60\n    );\n\n    return items;\n  }\n\n  /**\n   * Find a tag by its slug\n   */\n  findTagBySlug(slug) {\n    if (!app.store || !app.store.all) return null;\n    \n    const tags = app.store.all('tags');\n    return tags.find(tag => tag.slug() === slug);\n  }\n\n  /**\n   * Language dropdown selector\n   */\n  languageDropdown() {\n    // Check if fof/linguist or flarum/lang-ext is available\n    const locales = app.data.locales || {};\n    const currentLocale = app.data.locale || 'en';\n    \n    if (Object.keys(locales).length <= 1) {\n      // Only one locale, just show current language\n      return (\n        <div className=\"CustomMobileDrawer-languageDisplay\">\n          <span className=\"CustomMobileDrawer-link\">\n            {this.getLocaleName(currentLocale)}\n            <i className=\"fas fa-globe CustomMobileDrawer-icon\"></i>\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"CustomMobileDrawer-dropdown\">\n        <button \n          className=\"CustomMobileDrawer-link CustomMobileDrawer-dropdownTrigger\"\n          onclick={(e) => this.toggleDropdown(e, 'language')}\n        >\n          {this.getLocaleName(currentLocale)}\n          <i className=\"fas fa-chevron-down CustomMobileDrawer-chevron\"></i>\n        </button>\n        <ul className=\"CustomMobileDrawer-dropdownMenu\" id=\"language-dropdown\">\n          {Object.keys(locales).map(locale => (\n            <li key={locale}>\n              <a \n                href=\"javascript:void(0)\" \n                onclick={() => this.changeLocale(locale)}\n                className={currentLocale === locale ? 'active' : ''}\n              >\n                {locales[locale]}\n              </a>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  /**\n   * Get locale display name\n   */\n  getLocaleName(locale) {\n    const names = {\n      'en': 'English',\n      'vi': 'Ting Vit'\n    };\n    return names[locale] || app.data.locales?.[locale] || locale;\n  }\n\n  /**\n   * Change locale\n   */\n  changeLocale(locale) {\n    if (app.session.user) {\n      app.session.user.savePreferences({ locale }).then(() => {\n        window.location.reload();\n      });\n    } else {\n      document.cookie = `locale=${locale};path=/;max-age=${60 * 60 * 24 * 365}`;\n      window.location.reload();\n    }\n  }\n\n  /**\n   * Theme toggle button\n   */\n  themeToggle() {\n    // Check if night mode extension is available\n    const nightMode = app.forum.attribute('darkMode') || localStorage.getItem('fofNightMode');\n    \n    return (\n      <button \n        className=\"CustomMobileDrawer-link\"\n        onclick={() => this.toggleTheme()}\n      >\n        <i className=\"fas fa-cog CustomMobileDrawer-icon--left\"></i>\n        {trans('appearance', 'Giao Din')}\n      </button>\n    );\n  }\n\n  /**\n   * Toggle theme (if night mode extension is available)\n   */\n  toggleTheme() {\n    // Try to trigger FoF NightMode\n    const nightModeToggle = document.querySelector('.item-nightMode button, .NightMode-toggle');\n    if (nightModeToggle) {\n      nightModeToggle.click();\n    } else {\n      // Fallback: toggle dark class on body\n      document.body.classList.toggle('dark');\n      const isDark = document.body.classList.contains('dark');\n      localStorage.setItem('fofNightMode', isDark ? 'dark' : 'light');\n    }\n  }\n\n  /**\n   * Toggle dropdown visibility\n   */\n  toggleDropdown(e, dropdownId) {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const dropdown = document.getElementById(`${dropdownId}-dropdown`);\n    if (dropdown) {\n      dropdown.classList.toggle('open');\n    }\n  }\n\n  /**\n   * Guest section with login/register buttons and social login\n   */\n  guestSection() {\n    const mainSiteUrl = app.forum.attribute('vietvan_ca_back_button_custom_url') || '';\n    const baseMainUrl = mainSiteUrl ? mainSiteUrl.replace('/forum', '').replace(/\\/$/, '') : '';\n    \n    // Get JWT SSO URLs if available\n    const loginUrl = app.forum.attribute('jwt-sso.login_url') || `${baseMainUrl}/auth/login`;\n    const registerUrl = `${baseMainUrl}/auth/register`;\n\n    return (\n      <div className=\"CustomMobileDrawer-guest\">\n        {/* Register Button */}\n        <a href={registerUrl} className=\"Button Button--primary CustomMobileDrawer-registerBtn\">\n          {trans('register', 'ng k')}\n        </a>\n\n        {/* Login Button */}\n        <a href={loginUrl} className=\"Button Button--secondary CustomMobileDrawer-loginBtn\">\n          {trans('login', 'ng nhp')}\n        </a>\n\n        {/* Social Login Separator */}\n        <div className=\"CustomMobileDrawer-socialSeparator\">\n          <span>{trans('or', 'Hoc:')}</span>\n        </div>\n\n        {/* Social Login Buttons */}\n        <div className=\"CustomMobileDrawer-socialButtons\">\n          <button \n            className=\"Button CustomMobileDrawer-socialBtn CustomMobileDrawer-socialBtn--facebook\"\n            onclick={() => this.socialLogin('facebook')}\n          >\n            <i className=\"fab fa-facebook CustomMobileDrawer-socialIcon\"></i>\n            {trans('login_facebook', 'ng nhp bng Facebook')}\n          </button>\n\n          <button \n            className=\"Button CustomMobileDrawer-socialBtn CustomMobileDrawer-socialBtn--google\"\n            onclick={() => this.socialLogin('google')}\n          >\n            <img src=\"https://www.google.com/favicon.ico\" alt=\"Google\" className=\"CustomMobileDrawer-socialIcon CustomMobileDrawer-socialIcon--img\" />\n            {trans('login_google', 'ng nhp bng Google')}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Handle social login\n   */\n  socialLogin(provider) {\n    const mainSiteUrl = app.forum.attribute('vietvan_ca_back_button_custom_url') || '';\n    const baseMainUrl = mainSiteUrl ? mainSiteUrl.replace('/forum', '').replace(/\\/$/, '') : '';\n    \n    // Redirect to main site's OAuth endpoint\n    const currentUrl = encodeURIComponent(window.location.href);\n    window.location.href = `${baseMainUrl}/auth/${provider}?redirect=${currentUrl}`;\n  }\n\n  /**\n   * Logged in user section\n   */\n  loggedInSection() {\n    const user = app.session.user;\n\n    return (\n      <div className=\"CustomMobileDrawer-user\">\n        {/* User Info */}\n        <div className=\"CustomMobileDrawer-userInfo\">\n          <div className=\"CustomMobileDrawer-avatar\">\n            <img src={user.avatarUrl()} alt={user.displayName()} />\n          </div>\n          <div className=\"CustomMobileDrawer-userName\">\n            <span className=\"CustomMobileDrawer-displayName\">{user.displayName()}</span>\n          </div>\n        </div>\n\n        {/* User Menu */}\n        <ul className=\"CustomMobileDrawer-userMenu\">\n          <li>\n            <a href={app.route.user(user)} className=\"CustomMobileDrawer-link\">\n              <i className=\"fas fa-user CustomMobileDrawer-icon--left\"></i>\n              {trans('profile', 'Trang c nhn')}\n            </a>\n          </li>\n          <li>\n            <a href={app.route('settings')} className=\"CustomMobileDrawer-link\">\n              <i className=\"fas fa-cog CustomMobileDrawer-icon--left\"></i>\n              {trans('settings', 'Ci t ti khon')}\n            </a>\n          </li>\n          <li>\n            <button \n              className=\"CustomMobileDrawer-link CustomMobileDrawer-logout\"\n              onclick={() => this.logout()}\n            >\n              <i className=\"fas fa-sign-out-alt CustomMobileDrawer-icon--left\"></i>\n              {trans('logout', 'ng xut')}\n            </button>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n\n  /**\n   * Handle logout\n   */\n  logout() {\n    const confirmMessage = trans('logout_confirm', 'Bn c chc chn mun ng xut?');\n    if (confirm(confirmMessage)) {\n      app.session.logout();\n    }\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","import app from 'flarum/forum/app';\nimport { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport Button from 'flarum/common/components/Button';\n\nimport CustomDiscussionRow from './components/CustomDiscussionRow';\nimport DiscussionListHeader from './components/DiscussionListHeader';\nimport HeroSection from './components/HeroSection';\nimport BackButton from './components/BackButton';\nimport Logo from './components/Logo';\nimport CustomDiscussionTabNavigation from './components/CustomDiscussionTabNavigation';\nimport CustomMobileDiscussionToolbar from './components/CustomMobileDiscussionToolbar';\nimport CustomMobileDrawer from './components/CustomMobileDrawer';\n\napp.initializers.add('vietvan-ca-themes', () => {\n  // ==========================================\n  // Change Hide Button Icon to Eye\n  // ==========================================\n  \n  // Use DOM manipulation to change the hide button icon after render\n  const changeHideButtonIcons = () => {\n    // Check if user level.id is 1\n    // if (app.session.user && app.session.user.attribute('level') && app.session.user.attribute('level').id == 1) {\n    //   // Change hide button icons in discussion controls\n    //   const hideButtons = document.querySelectorAll('.item-hide button .fa-trash-alt');\n    //   hideButtons.forEach(icon => {\n    //     if (icon.classList.contains('fa-trash-alt')) {\n    //       icon.classList.remove('fa-trash-alt');\n    //       icon.classList.add('fa-eye');\n    //     }\n    //   });\n      \n    //   // Change hidden badge icons\n    //   const hiddenBadges = document.querySelectorAll('.item-hidden .fas.fa-trash, .Badge--hidden .fas.fa-trash');\n    //   hiddenBadges.forEach(icon => {\n    //     if (icon.classList.contains('fa-trash')) {\n    //       icon.classList.remove('fa-trash');\n    //       icon.classList.add('fa-eye');\n    //     }\n    //   });\n    // } else {\n    //   // Hide hide buttons and hidden badges for users with level.id != 1 or guests\n    //   const hideButtonItems = document.querySelectorAll('.item-hide');\n    //   hideButtonItems.forEach(item => {\n    //     item.style.display = 'none';\n    //   });\n      \n    //   const hiddenBadgeItems = document.querySelectorAll('.item-hidden');\n    //   hiddenBadgeItems.forEach(item => {\n    //     item.style.display = 'none';\n    //   });\n    // }\n    const hideButtons = document.querySelectorAll('.item-hide button .fa-trash-alt');\n    hideButtons.forEach(icon => {\n      if (icon.classList.contains('fa-trash-alt')) {\n        icon.classList.remove('fa-trash-alt');\n        icon.classList.add('fa-eye');\n      }\n    });\n    \n    // Change hidden badge icons\n    const hiddenBadges = document.querySelectorAll('.item-hidden .fas.fa-trash, .Badge--hidden .fas.fa-trash');\n    hiddenBadges.forEach(icon => {\n      if (icon.classList.contains('fa-trash')) {\n        icon.classList.remove('fa-trash');\n        icon.classList.add('fa-eye');\n      }\n    });\n  };\n\n  // Run icon replacement on page load and route changes\n  const initializeHideButtonChanges = () => {\n    // Initial run\n    setTimeout(changeHideButtonIcons, 500);\n    \n    // Run on route changes\n    if (app.history?.initialized) {\n      app.history.initialized.then(() => {\n        app.history.router.on('changed', () => {\n          setTimeout(changeHideButtonIcons, 500);\n        });\n      });\n    }\n    \n    // Also run periodically to catch dynamically loaded content\n    setInterval(changeHideButtonIcons, 2000);\n  };\n\n  initializeHideButtonChanges();\n\n  // ==========================================\n  // Set Light Theme as Default\n  // ==========================================\n  const setDefaultLightTheme = () => {\n    // Only set default if user hasn't explicitly chosen a theme preference\n    if (app.session.user) {\n      const nightModePreference = app.session.user.preferences().fofNightMode;\n      \n      // If night mode preference is null/undefined, set default to light\n      if (nightModePreference === null || nightModePreference === undefined) {\n        app.session.user.savePreferences({\n          fofNightMode: false\n        }).catch(() => {\n          // Ignore errors if preferences can't be saved\n        });\n      }\n    }\n    \n    // For guests, remove any dark theme classes that might be applied by system preferences\n    const body = document.body;\n    const html = document.documentElement;\n    \n    // Check if no explicit theme choice has been made\n    const hasExplicitDarkTheme = localStorage.getItem('fof-nightmode') === 'true' || \n                                 localStorage.getItem('darkMode') === 'true';\n    \n    if (!hasExplicitDarkTheme) {\n      // Remove potential system-applied dark classes\n      [body, html].forEach(element => {\n        if (element) {\n          const darkClasses = ['dark', 'dark-mode', 'fof-nightmode'];\n          darkClasses.forEach(className => {\n            element.classList.remove(className);\n          });\n        }\n      });\n    }\n  };\n\n  // Initialize default light theme\n  const initializeDefaultTheme = () => {\n    // Set default theme once when app loads\n    setTimeout(setDefaultLightTheme, 100);\n  };\n\n  initializeDefaultTheme();\n\n  // ==========================================\n  // Auto Text Color for Discussion Tags and Buttons\n  // ==========================================\n  const adjustTextColors = () => {\n    // Handle discussion tags\n    const coloredTags = document.querySelectorAll('.discussion-tag.colored');\n    coloredTags.forEach(tag => adjustElementTextColor(tag, 'backgroundColor'));\n    \n    // Handle colored buttons (like create discussion button)\n    const coloredButtons = document.querySelectorAll('.Button--tagColored, .Button--primary[style*=\"--color\"]');\n    coloredButtons.forEach(button => {\n      // Check if button has custom --color property\n      const customColor = button.style.getPropertyValue('--color');\n      if (customColor) {\n        adjustElementTextColor(button, 'customColor', customColor);\n      }\n    });\n  };\n\n  const adjustElementTextColor = (element, colorSource, customColor = null) => {\n    let backgroundColor;\n    \n    if (colorSource === 'customColor' && customColor) {\n      backgroundColor = customColor;\n    } else {\n      backgroundColor = window.getComputedStyle(element).backgroundColor;\n    }\n    \n    // Parse color values - handle both rgb() and hex formats\n    let r, g, b;\n    \n    if (backgroundColor.startsWith('#')) {\n      // Handle hex colors - fix the parsing\n      const hex = backgroundColor.replace('#', '');\n      if (hex.length === 3) {\n        // Handle short hex like #FFF\n        r = parseInt(hex.substr(0, 1) + hex.substr(0, 1), 16);\n        g = parseInt(hex.substr(1, 1) + hex.substr(1, 1), 16);\n        b = parseInt(hex.substr(2, 1) + hex.substr(2, 1), 16);\n      } else if (hex.length === 6) {\n        // Handle full hex like #FFF300\n        r = parseInt(hex.substr(0, 2), 16);\n        g = parseInt(hex.substr(2, 2), 16);\n        b = parseInt(hex.substr(4, 2), 16);\n      } else {\n        return; // Skip if invalid hex format\n      }\n    } else {\n      // Handle rgb() colors\n      const rgbMatch = backgroundColor.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n      if (rgbMatch) {\n        [, r, g, b] = rgbMatch.map(Number);\n      } else {\n        return; // Skip if can't parse color\n      }\n    }\n    \n    // Calculate different brightness metrics\n    const wcagLuminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    const perceivedBrightness = Math.sqrt(0.241 * r * r + 0.691 * g * g + 0.068 * b * b) / 255;\n    const averageBrightness = (r + g + b) / (3 * 255);\n    \n    // Calculate saturation to detect bright colors\n    const max = Math.max(r, g, b) / 255;\n    const min = Math.min(r, g, b) / 255;\n    const saturation = max === 0 ? 0 : (max - min) / max;\n    \n    // Calculate contrast ratios with black and white text\n    const contrastWithBlack = (Math.max(wcagLuminance, 0.05) + 0.05) / (0.05 + 0.05);\n    const contrastWithWhite = (1.05) / (Math.max(wcagLuminance, 0.05) + 0.05);\n    \n    // For very bright colors like yellow (#FFF300), use lower threshold\n    // Yellow and bright colors should use black text\n    const brightnessThreshold = saturation > 0.8 && wcagLuminance > 0.7 ? 0.6 : \n                               saturation > 0.4 ? 0.75 : 0.65;\n    \n    const shouldUseBlackText = wcagLuminance > brightnessThreshold && \n                               perceivedBrightness > (brightnessThreshold - 0.1) && \n                               averageBrightness > (brightnessThreshold - 0.15) &&\n                               contrastWithBlack > contrastWithWhite;\n    \n    // Apply styles with !important for stronger override\n    element.style.setProperty('color', shouldUseBlackText ? '#000000' : '#ffffff', 'important');\n    \n    // Add appropriate text shadow with better contrast for colorful backgrounds\n    const textShadow = shouldUseBlackText \n      ? '0 0 1px rgba(255, 255, 255, 0.6)' \n      : '0 0 1px rgba(0, 0, 0, 0.8)';\n    element.style.setProperty('text-shadow', textShadow, 'important');\n    \n    // For buttons, also ensure the background color is applied correctly\n    if (colorSource === 'customColor' && customColor) {\n      element.style.setProperty('background-color', customColor, 'important');\n      // Remove any conflicting classes\n      element.classList.remove('text-contrast--dark', 'text-contrast--light');\n    }\n  };\n\n  // Initialize text color adjustment\n  const initializeTextColors = () => {\n    // Initial run\n    setTimeout(adjustTextColors, 200);\n    \n    // Run on route changes\n    if (app.history?.initialized) {\n      app.history.initialized.then(() => {\n        app.history.router.on('changed', () => {\n          setTimeout(adjustTextColors, 200);\n        });\n      });\n    }\n    \n    // Run periodically to catch dynamically loaded content\n    setInterval(adjustTextColors, 3000);\n    \n    // Watch for DOM changes (new discussions loaded)\n    const observer = new MutationObserver(() => {\n      setTimeout(adjustTextColors, 100);\n    });\n    \n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n  };\n\n  initializeTextColors();\n\n  // ==========================================\n  // TextEditor Toolbar Reordering & Cleanup\n  // ==========================================\n  // Reorder and hide items in TextEditor controls\n  extend(TextEditor.prototype, 'controlItems', function(items) {\n    // Debug: log all available items\n    console.log('Available controlItems:', Array.from(items.toArray().map(item => item.itemName)));\n    \n    // Remove fof-upload-media from controlItems so we can add it to toolbar instead\n    if (items.has('fof-upload-media')) {\n      console.log('Removing fof-upload-media from controlItems to move to toolbar');\n      items.remove('fof-upload-media');\n    }\n    \n    // Hide unwanted items - try multiple possible names\n    const itemsToHide = [\n      'fof-upload',      // File upload button\n      'fofUpload',       // Alternative naming\n      'upload',          // Alternative naming\n      'rich-text',       // Toggle Rich Text Mode\n      'richText',        // Alternative naming\n      'emoji',           // Insert emoji\n      'preview',         // Preview button\n    ];\n    \n    itemsToHide.forEach(key => {\n      if (items.has(key)) {\n        console.log('Removing controlItem:', key);\n        items.remove(key);\n      }\n    });\n\n    // Set priorities (higher = appears first/left)\n    if (items.has('TextEditor-toolbar')) items.setPriority('TextEditor-toolbar', 90);\n    if (items.has('mention')) items.setPriority('mention', 80);\n    if (items.has('submit')) items.setPriority('submit', -100);\n  });\n\n  // Customize ProseMirror toolbar items\n  extend(TextEditor.prototype, 'toolbarItems', function(items) {\n    // Debug: log all available toolbar items\n    console.log('Available toolbarItems:', Array.from(items.toArray().map(item => item.itemName)));\n    \n    // Hide specific toolbar items - try multiple possible names\n    const toolbarItemsToHide = [\n      'nodeType',        // P/H1-H6 dropdown\n      'node_type',       // Alternative naming\n      'code',            // Inline code\n      'quote',           // Quote\n      'link',            // Link dropdown\n      'image',           // Image dropdown\n      'more',            // Additional controls dropdown\n      'additional',      // Alternative naming\n      'extra',           // Alternative naming\n    ];\n    \n    toolbarItemsToHide.forEach(key => {\n      if (items.has(key)) {\n        console.log('Removing toolbarItem:', key);\n        items.remove(key);\n      }\n    });\n\n    // Add media upload button to toolbar positioned after numbered list\n    const mediaUploadButton = Button.component({\n      icon: 'fas fa-photo-video',\n      className: 'Button Button--icon Button--link',\n      title: app.translator.trans('fof-upload.forum.buttons.media', {}, 'Media'),\n      onclick: (e) => {\n        e.preventDefault();\n        // Find and trigger the original media upload functionality\n        const originalButton = document.querySelector('.item-fof-upload-media .fof-upload-button');\n        if (originalButton) {\n          originalButton.click();\n        } else {\n          console.warn('Could not find original media upload button');\n        }\n      }\n    });\n    \n    items.add('fof-upload-media-toolbar', mediaUploadButton, 65); // Position between ordered_list (70) and other items\n\n    // Reorder remaining toolbar items\n    if (items.has('bold')) items.setPriority('bold', 100);\n    if (items.has('italic')) items.setPriority('italic', 90);\n    if (items.has('bullet_list')) items.setPriority('bullet_list', 80);\n    if (items.has('ordered_list')) items.setPriority('ordered_list', 70);\n    // fof-upload-media-toolbar will be at 65 - right after ordered_list\n  });\n\n  // Fallback: Use DOM manipulation to hide elements (media button is handled via toolbarItems)\n  const hideTextEditorElements = () => {\n    // Hide the original media upload button container (since we added it to toolbar)\n    const mediaButtonContainer = document.querySelector('.item-fof-upload-media');\n    if (mediaButtonContainer) {\n      mediaButtonContainer.style.display = 'none';\n    }\n    \n    // Hide other upload buttons (but keep media button for moving)\n    const uploadButtons = document.querySelectorAll('.item-fof-upload:not(.item-fof-upload-media)');\n    uploadButtons.forEach(el => el.style.display = 'none');\n\n    // Hide node type dropdown (P/H1-H6)\n    const nodeTypeDropdowns = document.querySelectorAll('.NodeTypeButton, .NodeTypeDropdownMenu');\n    nodeTypeDropdowns.forEach(el => {\n      if (el.closest) {\n        const container = el.closest('.ButtonGroup.Dropdown');\n        if (container) container.style.display = 'none';\n      }\n    });\n    \n    // Hide link dropdown\n    const linkDropdowns = document.querySelectorAll('button[aria-label*=\"link\" i], button[title*=\"link\" i]');\n    linkDropdowns.forEach(el => {\n      if (el.querySelector('.fa-link')) {\n        const container = el.closest('.ButtonGroup.Dropdown');\n        if (container) container.style.display = 'none';\n      }\n    });\n    \n    // Hide image dropdown\n    const imageDropdowns = document.querySelectorAll('button[aria-label*=\"image\" i], button[title*=\"image\" i]');\n    imageDropdowns.forEach(el => {\n      if (el.querySelector('.fa-image')) {\n        const container = el.closest('.ButtonGroup.Dropdown');\n        if (container) container.style.display = 'none';\n      }\n    });\n    \n    // Hide additional controls (more dropdown)\n    const moreDropdowns = document.querySelectorAll('button[aria-label*=\"Additional Controls\" i], button[title*=\"Additional Controls\" i]');\n    moreDropdowns.forEach(el => {\n      if (el.querySelector('.fa-plus')) {\n        const container = el.closest('.ButtonGroup.Dropdown');\n        if (container) container.style.display = 'none';\n      }\n    });\n    \n    // Hide any remaining unwanted items by icon\n    const iconsToHide = [\n      '.fa-file-upload',   // Upload icon\n      '.fa-link',          // Link icon (in dropdowns)\n      '.fa-image',         // Image icon (in dropdowns)\n      '.fa-plus',          // More controls icon (in dropdowns)\n    ];\n    \n    iconsToHide.forEach(iconSelector => {\n      const icons = document.querySelectorAll(iconSelector);\n      icons.forEach(icon => {\n        const button = icon.closest('button');\n        if (button) {\n          const dropdown = button.closest('.ButtonGroup.Dropdown');\n          if (dropdown) {\n            dropdown.style.display = 'none';\n          } else {\n            // Don't hide the media button if it's the one we want to keep\n            const isMediaButton = icon.classList.contains('fa-photo-video') || \n                                  button.getAttribute('aria-label')?.toLowerCase().includes('media');\n            if (!isMediaButton) {\n              button.style.display = 'none';\n            }\n          }\n        }\n      });\n    });\n  };\n\n  // Initialize DOM-based hiding\n  const initializeTextEditorHiding = () => {\n    // Initial run\n    setTimeout(hideTextEditorElements, 300);\n    \n    // Run on route changes\n    if (app.history?.initialized) {\n      app.history.initialized.then(() => {\n        app.history.router.on('changed', () => {\n          setTimeout(hideTextEditorElements, 300);\n        });\n      });\n    }\n    \n    // Watch for TextEditor creation\n    const observer = new MutationObserver(() => {\n      setTimeout(hideTextEditorElements, 100);\n    });\n    \n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n    \n    // Also run periodically\n    setInterval(hideTextEditorElements, 2000);\n  };\n\n  initializeTextEditorHiding();\n\n  // Use oncreate to inject custom mobile drawer after IndexPage is created\n  extend(IndexPage.prototype, 'oncreate', function() {\n    this.injectCustomDrawer();\n  });\n\n  extend(IndexPage.prototype, 'onupdate', function() {\n    this.injectCustomDrawer();\n  });\n\n  // Add method to inject custom drawer\n  IndexPage.prototype.injectCustomDrawer = function() {\n    const drawer = document.getElementById('drawer');\n    if (drawer && !drawer.querySelector('.CustomMobileDrawer')) {\n      const drawerContent = drawer.querySelector('.Drawer-content, .App-drawer');\n      if (drawerContent) {\n        // Create container if it doesn't exist\n        let customDrawerContainer = drawerContent.querySelector('.CustomMobileDrawer-container');\n        if (!customDrawerContainer) {\n          customDrawerContainer = document.createElement('div');\n          customDrawerContainer.className = 'CustomMobileDrawer-container';\n          \n          // Mount the custom drawer component\n          m.mount(customDrawerContainer, CustomMobileDrawer);\n          \n          // Prepend to drawer content\n          drawerContent.insertBefore(customDrawerContainer, drawerContent.firstChild);\n        }\n      }\n    }\n  };\n\n  // Utility function to find element by class path\n  const findElementByPath = (vnode, path) => {\n    let current = vnode;\n\n    for (const className of path) {\n      if (!current?.children || !Array.isArray(current.children)) {\n        return null;\n      }\n\n      const found = current.children.find((child) => child?.attrs?.className?.includes(className));\n\n      if (!found) return null;\n      current = found;\n    }\n\n    return current;\n  };\n\n  // Check for register button visibility using document events\n  const checkRegisterButtonVisibility = () => {\n    try {\n      if (app.forum?.attribute) {\n        const showRegisterButton = app.forum.attribute('vietvan_ca_show_register_button') === '1';\n\n        if (!showRegisterButton) {\n          const registerButton = document.querySelector('.item-signUp');\n          registerButton?.remove();\n        }\n      }\n    } catch (error) {\n      console.error('Error checking register button visibility:', error);\n    }\n  };\n\n  // Check for custom logo, if it exists, remove the default logo\n  const checkCustomLogo = () => {\n    try {\n      const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n      const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n      if (lightLogoPath || darkLogoPath) {\n        const defaultLogo = document.querySelector('.Header-title');\n        defaultLogo?.remove();\n      }\n    } catch (error) {\n      console.error('Error checking custom logo:', error);\n    }\n  };\n\n  // Run all component checks\n  const runComponentChecks = () => {\n    checkRegisterButtonVisibility();\n    checkCustomLogo();\n  };\n\n  // Initialize component checks\n  const initializeChecks = () => {\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      setTimeout(runComponentChecks, 100);\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        setTimeout(runComponentChecks, 100);\n      });\n    }\n\n    // Run when route changes\n    app.history.initialized?.then(() => {\n      app.history.router.on('changed', runComponentChecks);\n    });\n  };\n\n  // Initialize checks\n  initializeChecks();\n\n  // Extend the HeaderPrimary component to replace the logo with a custom one\n  extend(HeaderPrimary.prototype, 'items', function (items) {\n    const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n    const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n    if (lightLogoPath || darkLogoPath) {\n      items.add('logo', <Logo />, 90);\n    }\n  });\n\n  // Extend the HeaderSecondary component to remove the search component\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (items.has('search')) {\n      items.remove('search');\n    }\n  });\n\n  // Extend the DiscussionListItem component to use the custom row\n  extend(DiscussionListItem.prototype, 'view', function (vnode) {\n    vnode.children = [\n      m(CustomDiscussionRow, {\n        discussion: this.attrs.discussion,\n      }),\n    ];\n  });\n\n  // Extend the DiscussionList component to add a header\n  extend(DiscussionList.prototype, 'view', function (vnode) {\n    const originalChildren = vnode.children;\n    vnode.children = [m('ul.DiscussionList', [m(DiscussionListHeader), ...originalChildren])];\n  });\n\n  // Extend the IndexPage component to add a hero section and custom tabs\n  extend(IndexPage.prototype, 'view', function (vnode) {\n    // Add HeroSection at the beginning\n    const heroSectionInstance = m(HeroSection);\n    const originalChildren = vnode.children;\n    vnode.children = [heroSectionInstance, ...originalChildren];\n\n    // Create custom mobile discussion toolbar instance\n    const customMobileDiscussionToolbarInstance = <CustomMobileDiscussionToolbar />;\n\n    // Create custom tabs instance\n    const customTabsInstance = <CustomDiscussionTabNavigation />;\n\n    // Find toolbar using optimized path traversal\n    const toolbarPath = ['container', 'sideNavContainer', 'IndexPage-results', 'IndexPage-toolbar', 'IndexPage-toolbar-view'];\n    const toolbarDiv = findElementByPath({ children: originalChildren }, toolbarPath);\n\n    if (toolbarDiv) {\n      // Replace toolbar content with custom tabs\n      toolbarDiv.children = [customMobileDiscussionToolbarInstance, customTabsInstance];\n    } else {\n      console.warn('IndexPage-toolbar-view not found. CustomTabNavigation not added.');\n    }\n\n    // Run component checks after render\n    setTimeout(runComponentChecks, 100);\n  });\n\n  // Add mobile logo using DOM manipulation\n  extend(IndexPage.prototype, 'oncreate', function () {\n    const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n    const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n    if (lightLogoPath || darkLogoPath) {\n      this.addMobileLogo();\n    }\n  });\n\n  extend(IndexPage.prototype, 'onupdate', function () {\n    const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n    const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n    if (lightLogoPath || darkLogoPath) {\n      this.addMobileLogo();\n    }\n  });\n\n  // Add method to IndexPage prototype\n  IndexPage.prototype.addMobileLogo = function () {\n    const navElement = document.getElementById('app-navigation');\n\n    if (navElement && !navElement.querySelector('.Navigation-logo')) {\n      // Create logo container\n      const logoDiv = document.createElement('div');\n      logoDiv.className = 'Navigation-logo Mobile-only';\n\n      // Mount Logo component into the div\n      m.mount(logoDiv, {\n        view: () => m(Logo, { imageStyle: { height: '30px' } }),\n      });\n\n      // Insert at the beginning of navigation (before App-backControl)\n      const backControl = navElement.querySelector('.App-backControl');\n      if (backControl) {\n        navElement.insertBefore(logoDiv, backControl);\n      } else {\n        navElement.insertBefore(logoDiv, navElement.firstChild);\n      }\n    }\n  };\n\n  extend(IndexPage.prototype, 'onremove', function () {\n    const navElement = document.getElementById('app-navigation');\n    const logoElement = navElement?.querySelector('.Navigation-logo');\n    \n    if (logoElement) {\n      m.mount(logoElement, null); // Unmount the component\n      logoElement.remove();\n    }\n  });\n\n  // Adding scale font size feature\n  let currentScale = 1.05;\n\n  // Apply initial font zoom\n  applyFontZoom(currentScale);\n});\n\nfunction applyFontZoom(scale) {\n  // Remove existing font zoom styles\n  const existingStyle = document.getElementById('font-zoom-style');\n  if (existingStyle) {\n    existingStyle.remove();\n  }\n\n  // Create new style element\n  const style = document.createElement('style');\n  style.id = 'font-zoom-style';\n\n  // Apply zoom to various elements\n  style.textContent = `\n    .App {\n      font-size: ${scale}rem !important;\n    }\n    \n    /* Ensure consistent scaling across all text elements */\n    .Post-body,\n    .PostPreview-body,\n    .UserCard-info,\n    .NotificationGrid-content,\n    .Dropdown-menu,\n    .Modal-body,\n    .Form-group label,\n    .Form-group input,\n    .Form-group textarea,\n    .TagLabel,\n    .Badge {\n      font-size: ${scale}em !important;\n    }\n    \n    /* Scale headings proportionally */\n    h1 { font-size: ${scale * 2}rem !important; }\n    h2 { font-size: ${scale * 1.5}rem !important; }\n    h3 { font-size: ${scale * 1.25}rem !important; }\n    h4 { font-size: ${scale * 1.125}rem !important; }\n    h5 { font-size: ${scale * 1}rem !important; }\n    h6 { font-size: ${scale * 0.875}rem !important; }\n    \n    /* Scale code blocks */\n    code,\n    pre {\n      font-size: ${scale * 0.875}em !important;\n    }\n  `;\n\n  document.head.appendChild(style);\n\n  // Store for guests as mitigate if improved\n  localStorage.setItem('flarum-font-zoom-scale', scale.toString());\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","TopicColumn","_Component","apply","arguments","view","discussion","this","attrs","firstPost","tags","isSticky","isLocked","m","icon","Link","href","app","title","map","tag","className","color","style","backgroundColor","name","attribute","contentPlain","Component","ReplyColumn","_discussion$replyCoun","replyCount","ViewColumn","viewCount","getColorClass","index","colorClasses","length","ActivityColumn","lastPostedAt","timeSince","date","dateObj","Date","isNaN","getTime","diffTime","diffDays","Math","floor","diffHours","diffMinutes","getTimeSince","LastUsersColumn","latestPosters","slice","user","i","username","userName","avatarUrl","avatar_url","src","alt","charAt","toUpperCase","renderUserAvatar","CustomDiscussionRow","DiscussionListHeader","trans","CustomMobileDiscussionToolbar","_proto","_this","currentDate","SelectDropdown","buttonClassName","getNavigationItems","toArray","class","type","onclick","newDiscussionAction","items","ItemList","add","LinkButton","allTags","all","filter","hasParent","parent","position","sort","b","forEach","id","slug","Promise","resolve","reject","load","DiscussionComposer","show","LogInModal","HeroSection","oninit","vnode","_forum$attribute","_forum$attribute2","forum","enabled","mode","extensions","setupNightModeListener","setupSystemModeListener","setupBodyClassObserver","setTimeout","computeMode","redraw","newMode","locale","translator","getLocale","titleKey","descKey","description","showText","hasCustomColor","titleStyle","descriptionStyle","titleColor","subtitleColor","_document$cookie$spli","document","body","classList","contains","session","pref","preferences","fofNightMode","window","matchMedia","matches","cookieValue","cookie","split","find","row","startsWith","_this2","nightModeHandler","event","detail","addEventListener","_this3","mediaQuery","systemModeHandler","_this4","bodyObserver","MutationObserver","observe","attributes","attributeFilter","onremove","removeEventListener","disconnect","getBackgroundStyle","bgAttr","bgUrl","height","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","undefined","currentPath","location","pathname","backgroundStyle","Search","state","search","Logo","_app$session$user","logoAttr","logoUrl","customUrl","imageStyle","CustomDiscussionTabNavigation","_app$search$params","currentSort","params","tabs","label","sortParam","default","tab","isActive","routeName","isFilter","q","includes","filterParam","navigateTo","newPath","route","set","fallback","result","CustomMobileDrawer","listItems","menuItems","loggedInSection","guestSection","mainSiteUrl","replace","guidelinesTag","findTagBySlug","languageDropdown","themeToggle","locales","currentLocale","keys","getLocaleName","toggleDropdown","changeLocale","_app$data$locales","savePreferences","then","reload","localStorage","getItem","toggleTheme","nightModeToggle","querySelector","click","toggle","isDark","setItem","dropdownId","preventDefault","stopPropagation","dropdown","getElementById","baseMainUrl","loginUrl","socialLogin","provider","currentUrl","encodeURIComponent","displayName","logout","confirmMessage","confirm","_app$history","changeHideButtonIcons","querySelectorAll","remove","initialized","router","on","setInterval","nightModePreference","html","documentElement","element","_app$history2","adjustTextColors","adjustElementTextColor","button","customColor","getPropertyValue","colorSource","r","g","getComputedStyle","hex","parseInt","substr","rgbMatch","match","_rgbMatch$map","Number","wcagLuminance","perceivedBrightness","sqrt","averageBrightness","max","min","saturation","contrastWithBlack","contrastWithWhite","brightnessThreshold","shouldUseBlackText","setProperty","textShadow","childList","subtree","extend","TextEditor","console","log","Array","from","item","itemName","has","setPriority","mediaUploadButton","Button","originalButton","warn","_app$history3","hideTextEditorElements","mediaButtonContainer","display","el","closest","container","iconSelector","_button$getAttribute","getAttribute","toLowerCase","IndexPage","injectCustomDrawer","drawer","drawerContent","customDrawerContainer","createElement","mount","insertBefore","firstChild","_app$history$initiali","runComponentChecks","_app$forum","registerButton","error","checkRegisterButtonVisibility","lightLogoPath","darkLogoPath","defaultLogo","checkCustomLogo","readyState","HeaderPrimary","HeaderSecondary","DiscussionListItem","children","DiscussionList","originalChildren","concat","heroSectionInstance","customMobileDiscussionToolbarInstance","customTabsInstance","toolbarDiv","_ret","_step","current","_loop","_current","value","isArray","v","found","child","_child$attrs","_iterator","_createForOfIteratorHelperLoose","done","findElementByPath","addMobileLogo","navElement","logoDiv","backControl","logoElement","scale","existingStyle","textContent","head","appendChild","toString","applyFontZoom"],"sourceRoot":""}