{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@vietvan-ca/flarum-themes/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@vietvan-ca/flarum-themes/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ActivityColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/BackButton.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomDiscussionRow.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/CustomDiscussionTabNavigation.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/DiscussionListHeader.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/HeroSection.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/LastUsersColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/Logo.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ReplyColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/TopicColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/components/ViewColumn.js","webpack://@vietvan-ca/flarum-themes/./src/forum/index.js","webpack://@vietvan-ca/flarum-themes/./src/forum/utils/discussionHelpers.js","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/Component']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/Button']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/Link']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/extend']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/app']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/Search']\"","webpack://@vietvan-ca/flarum-themes/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@vietvan-ca/flarum-themes/webpack/bootstrap","webpack://@vietvan-ca/flarum-themes/webpack/runtime/compat get default export","webpack://@vietvan-ca/flarum-themes/webpack/runtime/define property getters","webpack://@vietvan-ca/flarum-themes/webpack/runtime/hasOwnProperty shorthand","webpack://@vietvan-ca/flarum-themes/webpack/runtime/make namespace object"],"sourcesContent":["import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import Component from 'flarum/common/Component';\nimport { getTimeSince } from '../utils/discussionHelpers';\n\n/**\n * Renders the activity column with time since last post and active users\n */\nexport default class ActivityColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const lastPostedAt = discussion.lastPostedAt();\n    const timeSince = lastPostedAt ? getTimeSince(new Date(lastPostedAt)) : '';\n\n    return m('div.discussion-activity', [m('span', timeSince)]);\n  }\n}\n","\nimport app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\n\nexport default class BackButton extends Component {\n  view() {\n    const customUrl = app.forum.attribute('vietvan_ca_back_button_custom_url');\n    if (!customUrl || customUrl.trim() === '') {\n      // If no custom URL is set, do not render the button\n      return null;\n    }\n\n    return (\n      <Button\n        className=\"Button Button--link Header-back\"\n        icon=\"fas fa-chevron-left\"\n        onclick={this.goBack.bind(this)}\n        title={app.translator.trans('vietvan-ca-flarum-themes.forum.header.back_button_tooltip')} \n      >\n        {app.translator.trans('vietvan-ca-flarum-themes.forum.header.back_button_text') || 'Back'}\n      </Button>\n    );\n  }\n\n  goBack() {\n    const customUrl = app.forum.attribute('vietvan_ca_back_button_custom_url');\n\n    if (customUrl && customUrl.trim() !== '') {\n      // Check if the custom URL is a valid URL\n      if (customUrl.startsWith('http://') || customUrl.startsWith('https://') || customUrl.startsWith('//')) {\n        window.location.href = customUrl; // For external URLs\n      } else {\n        window.location.href = app.forum.attribute('baseUrl') + customUrl; // For internal URLs\n      }\n    } else if (window.history.length > 1) {\n      window.history.back();\n    } else {\n      window.location.href = '/' // Fallback to home if no history or custom URL is set\n    }\n  }\n}","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport TopicColumn from './TopicColumn';\nimport ReplyColumn from './ReplyColumn';\nimport ViewColumn from './ViewColumn';\nimport ActivityColumn from './ActivityColumn';\nimport LastUsersColumn from './LastUsersColumn';\n\n/**\n * The main row component for discussions in the discussion list\n */\nexport default class CustomDiscussionRow extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n\n    return m(Link, {\n      className: 'discussion-row',\n      href: app.route.discussion(discussion),\n    }, [\n      m(TopicColumn, { discussion }),\n      m(LastUsersColumn, { discussion }),\n      m(ReplyColumn, { discussion }),\n      m(ViewColumn, { discussion }),\n      m(ActivityColumn, { discussion }),\n    ]);\n  }\n}\n","import Component from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport app from 'flarum/forum/app';\n\nexport default class CustomDiscussionTabNavigation extends Component {\n  view() {\n    const currentSort = app.search.params()?.sort;\n\n    const tabs = [\n      { key: 'latest', label: app.translator.trans('core.forum.index_sort.latest_button'), sortParam: '', default: true },\n      { key: 'top', label: app.translator.trans('core.forum.index_sort.top_button'), sortParam: 'top' },\n      { key: 'newest', label: app.translator.trans('core.forum.index_sort.newest_button'), sortParam: 'newest' },\n      { key: 'oldest', label: app.translator.trans('core.forum.index_sort.oldest_button'), sortParam: 'oldest' },\n    ];\n\n    return (\n      <div className=\"CustomDiscussionTabNavigation\">\n        {tabs.map((tab) => {\n          let isActive = false;\n          if (tab.routeName) {\n            isActive = app.current.matches(tab.routeName);\n          } else if (tab.isFilter) {\n            isActive = app.search.params.q && app.search.params.q.includes(tab.filterParam);\n          } else {\n            isActive = currentSort === tab.sortParam || (!currentSort && tab.default);\n          }\n\n          return (\n            <LinkButton className={`SortItem Button Button--link ${isActive ? 'active' : ''}`} onclick={() => this.navigateTo(tab)}>\n              {tab.label}\n            </LinkButton>\n          );\n        })}\n      </div>\n    );\n  }\n\n  navigateTo(tab) {\n    // 1. Get the current URL path (e.g., /t/general?sort=newest)\n    const currentPath = m.route.get();\n\n    // 2. Remove any existing query parameters by splitting the string at the '?'\n    const basePath = currentPath.split('?')[0]; // Result: /t/general\n\n    // 3. Build the new URL path string\n    let newPath = basePath;\n    if (!tab.default) {\n      // Add the sort parameter if this tab is not the default one\n      newPath += '?sort=' + tab.sortParam;\n    }\n\n    // 4. Use m.route.set() to navigate to the new URL without a full page reload\n    m.route.set(newPath);\n  }\n}\n","import Component from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\n\n\n/**\n * Renders the header for the discussion list\n */\n\nexport default class DiscussionListHeader extends Component {\n  view() {\n    return (\n      <li className=\"CustomDiscussionList-header\">\n        <div className=\"DiscussionListItem-info topic\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.topic')}\n        </div>\n        <div className=\"DiscussionListItem-info replies\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.replies')}\n        </div>\n        <div className=\"DiscussionListItem-info views\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.views')}\n        </div>\n        <div className=\"DiscussionListItem-info activity\">\n          {app.translator.trans('vietvan-ca-flarum-themes.forum.custom-discussion-header.activity')}\n        </div>\n      </li>\n    );\n  }\n}\n","import Component from 'flarum/common/Component';\nimport Search from 'flarum/forum/components/Search';\n\nexport default class HeroSection extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    const forum = app.forum;\n    // enabled?\n    this.enabled = forum.attribute('vietvan_ca_hero_enabled') === '1';\n    if (!this.enabled) return;\n\n    // Compute initial mode\n    this.mode = this.computeMode();\n\n    // Setup listeners\n    if (flarum.extensions['fof-nightmode']) {\n      this.setupNightModeListener();\n    }\n    this.setupSystemModeListener();\n\n    // Re-check mode after a short delay (in case FoF extension hasn't initialized yet)\n    setTimeout(() => {\n      const newMode = this.computeMode();\n      if (newMode !== this.mode) {\n        this.mode = newMode;\n        m.redraw();\n      }\n    }, 100);\n\n    // locale-specific text\n    this.locale = app.translator.getLocale() || 'en';\n    const titleKey = `vietvan_ca_hero_title_${this.locale}`;\n    const descKey = `vietvan_ca_hero_description_${this.locale}`;\n\n    this.title = forum.attribute(titleKey) ?? app.translator.trans('vietvan-ca-flarum-themes.forum.hero.title');\n    this.description = forum.attribute(descKey) ?? app.translator.trans('vietvan-ca-flarum-themes.forum.hero.description');\n\n    // show or hide text overlay?\n    this.showText = forum.attribute('vietvan_ca_hero_show_text') === '1';\n\n    // has custom text color?\n    this.hasCustomColor = forum.attribute('vietvan_ca_hero_custom_color_enabled') === '1';\n    this.titleStyle = {};\n    this.descriptionStyle = {};\n\n    if (this.hasCustomColor) {\n      const titleColor = forum.attribute('vietvan_ca_hero_title_color') || '#ffffff';\n      const subtitleColor = forum.attribute('vietvan_ca_hero_subtitle_color') || '#ffffff';\n\n      this.titleStyle = { color: titleColor };\n      this.descriptionStyle = { color: subtitleColor };\n    }\n  }\n\n  computeMode() {\n    // Check if user is logged in\n    const user = app.session.user;\n    \n    if (user) {\n      // Logged in: use user preference from FoF Night Mode\n      const pref = user.preferences().fofNightMode;\n      if (pref === '2') return 'dark';\n      if (pref === '1') return 'light';\n      if (pref === '0') {\n        // System preference for logged-in user\n        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n      }\n      return 'light';\n    }\n\n    // Guest: check cookie\n    const cookieValue = document.cookie\n      .split('; ')\n      .find(row => row.startsWith('flarum_nightmode='))\n      ?.split('=')[1];\n\n    if (cookieValue === '2') return 'dark';\n    if (cookieValue === '1') return 'light';\n    if (cookieValue === '0' || !cookieValue) {\n      // System preference\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    // Default\n    return 'light';\n  }\n\n  setupNightModeListener() {\n    this.nightModeHandler = (event) => {\n      this.mode = event.detail === 'day' ? 'light' : 'dark';\n      m.redraw();\n    };\n    document.addEventListener('fofnightmodechange', this.nightModeHandler);\n  }\n\n  setupSystemModeListener() {\n    // Listen to OS-level dark mode changes\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    this.systemModeHandler = (e) => {\n      const newMode = this.computeMode();\n      if (newMode !== this.mode) {\n        this.mode = newMode;\n        m.redraw();\n      }\n    };\n    mediaQuery.addEventListener('change', this.systemModeHandler);\n  }\n\n  onremove() {\n    // Clean up listeners\n    if (this.nightModeHandler) {\n      document.removeEventListener('fofnightmodechange', this.nightModeHandler);\n    }\n    if (this.systemModeHandler) {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      mediaQuery.removeEventListener('change', this.systemModeHandler);\n    }\n  }\n\n  getBackgroundStyle() {\n    const forum = app.forum;\n    const bgAttr = this.mode === 'dark' ? 'vietvan_ca_hero_background_image_darkUrl' : 'vietvan_ca_hero_background_imageUrl';\n    const bgUrl = forum.attribute(bgAttr);\n\n    return bgUrl\n      ? {\n          backgroundImage: `url(${bgUrl})`,\n          backgroundPosition: 'center',\n          backgroundSize: 'cover',\n          backgroundRepeat: 'no-repeat',\n          height: '35vh',\n        }\n      : undefined;\n  }\n\n  view() {\n    // Don't render if not enabled\n    if (!this.enabled) return null;\n\n    // Only show on the homepage (root path)\n    const currentPath = window.location.pathname;\n    if (currentPath !== '/' && currentPath !== '') return null;\n\n    // Get background style dynamically on each render\n    const backgroundStyle = this.getBackgroundStyle();\n\n    return (\n      <div className=\"HeroSection\" style={backgroundStyle}>\n        {this.showText && (\n          <div className=\"container\">\n            <h1 className=\"HeroSection-title\" style={this.titleStyle}>\n              {this.title}\n            </h1>\n            <p className=\"HeroSection-subtitle\" style={this.descriptionStyle}>\n              {this.description}\n            </p>\n          </div>\n        )}\n        <div className=\"container\">\n          <Search state={app.search} />\n        </div>\n      </div>\n    );\n  }\n}","import Component from 'flarum/common/Component';\nimport { renderUserAvatar } from '../utils/discussionHelpers';\n\n/**\n * Renders the activity column with time since last post and active users\n */\nexport default class LastUsersColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const latestPosters = discussion.attribute('latestPosters') || [];\n    \n    return m('div.discussion-users', [\n      m('div.active-users', latestPosters.slice(0, 5).map((user, i) => \n        renderUserAvatar(user, i)\n      ))\n    ]);\n  }\n}","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nexport default class Logo extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.mode = app.session.user?.preferences().fofNightMode === 2 ? 'dark' : 'light';\n    \n    if (flarum.extensions['fof-nightmode']) {\n      this.setupNightModeListener();\n    }\n  }\n\n  setupNightModeListener() {\n    document.addEventListener('fofnightmodechange', (event) => {\n      this.mode = event.detail === 'day' ? 'light' : 'dark';\n      m.redraw();\n    });\n  }\n\n  view() {\n    const logoAttr = this.mode === 'dark' ? 'vietvan_ca_logo_darkUrl' : 'vietvan_ca_logoUrl';\n    const logoUrl = app.forum.attribute(logoAttr);\n\n    if (!logoUrl) return null;\n\n    const customUrl = app.forum.attribute('vietvan_ca_back_button_custom_url') || app.route('index');\n\n    return (\n      <a href={customUrl} className=\"Header-logo CustomHeaderLogo\">\n        <img src={logoUrl} alt={'VietVan CA'} />\n      </a>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\n/**\n * Renders the reply count column\n */\nexport default class ReplyColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const replyCount = discussion.replyCount() ?? 0;\n\n    return m('div.discussion-reply', [\n      m('span', replyCount),\n    ]);\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport icon from 'flarum/common/helpers/icon';\n\n/**\n * Renders the topic column with title, tags, and excerpt\n */\nexport default class TopicColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const firstPost = discussion.firstPost();\n    const tags = discussion.tags() || [];\n    \n    // Get sticky and locked status\n    const isSticky = discussion.isSticky();\n    const isLocked = discussion.isLocked();\n    \n    return m('div.discussion-topic', [\n      m('div.discussion-badges', [\n        // Display sticky and locked badges if applicable\n        isSticky ? m('span.Badge.Badge--sticky', [\n          icon('fas fa-thumbtack')\n        ]) : null,\n        isLocked ? m('span.Badge.Badge--locked', [\n          icon('fas fa-lock'),\n        ]) : null,\n      ]),\n      m('div.discussion-title', [\n        m(Link, { \n          href: app.route.discussion(discussion) \n        }, discussion.title())\n      ]),\n      m('div.discussion-tags', [\n        tags.map(tag => m('span.discussion-tag', { \n          className: tag.color() ? 'colored' : '',\n          style: tag.color() ? { backgroundColor: tag.color() } : {}\n        }, tag.name())),\n      ]),\n      app.forum.attribute('custom-discussion-list.enable_excerpts') !== false ? \n        m('div.discussion-excerpt', firstPost?.contentPlain() || '') : null\n    ]);\n  }\n}","import Component from 'flarum/common/Component';\n\n/**\n * Renders the view count column\n */\nexport default class ViewColumn extends Component {\n  view() {\n    const discussion = this.attrs.discussion;\n    const viewCount = discussion.attribute('views') || 0;\n    \n    return m('div.discussion-view', [\n      m('span', viewCount)\n    ]);\n  }\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\n\nimport CustomDiscussionRow from './components/CustomDiscussionRow';\nimport DiscussionListHeader from './components/DiscussionListHeader';\nimport HeroSection from './components/HeroSection';\nimport BackButton from './components/BackButton';\nimport Logo from './components/Logo';\nimport CustomDiscussionTabNavigation from './components/CustomDiscussionTabNavigation';\n\napp.initializers.add('vietvan-ca-themes', () => {\n  // Utility function to find element by class path\n  const findElementByPath = (vnode, path) => {\n    let current = vnode;\n    \n    for (const className of path) {\n      if (!current?.children || !Array.isArray(current.children)) {\n        return null;\n      }\n      \n      const found = current.children.find(child => \n        child?.attrs?.className?.includes(className)\n      );\n      \n      if (!found) return null;\n      current = found;\n    }\n    \n    return current;\n  };\n\n  // Check for register button visibility using document events\n  const checkRegisterButtonVisibility = () => {\n    try {\n      if (app.forum?.attribute) {\n        const showRegisterButton = app.forum.attribute('vietvan_ca_show_register_button') === '1';\n\n        if (!showRegisterButton) {\n          const registerButton = document.querySelector('.item-signUp');\n          registerButton?.remove();\n        }\n      }\n    } catch (error) {\n      console.error('Error checking register button visibility:', error);\n    }\n  };\n\n  // Check for custom logo, if it exists, remove the default logo\n  const checkCustomLogo = () => {\n    try {\n      const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n      const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n      if (lightLogoPath || darkLogoPath) {\n        const defaultLogo = document.querySelector('.Header-title');\n        defaultLogo?.remove();\n      }\n    } catch (error) {\n      console.error('Error checking custom logo:', error);\n    }\n  };\n\n  // Run all component checks\n  const runComponentChecks = () => {\n    checkRegisterButtonVisibility();\n    checkCustomLogo();\n  };\n\n  // Initialize component checks\n  const initializeChecks = () => {\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      setTimeout(runComponentChecks, 100);\n    } else {\n      document.addEventListener('DOMContentLoaded', () => {\n        setTimeout(runComponentChecks, 100);\n      });\n    }\n\n    // Run when route changes\n    app.history.initialized?.then(() => {\n      app.history.router.on('changed', runComponentChecks);\n    });\n  };\n\n  // Initialize checks\n  initializeChecks();\n\n  // Extend the HeaderPrimary component to replace the logo with a custom one\n  extend(HeaderPrimary.prototype, 'items', function (items) {\n    const lightLogoPath = app.forum.attribute('vietvan_ca_logoUrl');\n    const darkLogoPath = app.forum.attribute('vietvan_ca_logo_darkUrl');\n\n    if (lightLogoPath || darkLogoPath) {\n      items.add('logo', <Logo />, 90);\n    }\n  });\n\n  // Extend the HeaderPrimary component to add a custom button, for now it is disabled\n  // extend(HeaderPrimary.prototype, 'items', function (items) {\n  //   items.add('back-button', <BackButton />, 90);\n  // });\n\n  // Extend the HeaderSecondary component to remove the search component\n  extend(HeaderSecondary.prototype, 'items', function(items) {\n    if (items.has('search')) {\n      items.remove('search');\n    }\n  });\n\n  // Extend the DiscussionListItem component to use the custom row\n  extend(DiscussionListItem.prototype, 'view', function (vnode) {\n    vnode.children = [\n      m(CustomDiscussionRow, {\n        discussion: this.attrs.discussion,\n      }),\n    ];\n  });\n\n  // Extend the DiscussionList component to add a header\n  extend(DiscussionList.prototype, 'view', function (vnode) {\n    const originalChildren = vnode.children;\n    vnode.children = [m('ul.DiscussionList', [m(DiscussionListHeader), ...originalChildren])];\n  });\n\n  // Extend the IndexPage component to add a hero section and custom tabs\n  extend(IndexPage.prototype, 'view', function (vnode) {\n    // Add HeroSection at the beginning\n    const heroSectionInstance = m(HeroSection);\n    const originalChildren = vnode.children;\n    vnode.children = [heroSectionInstance, ...originalChildren];\n\n    // Create custom tabs instance\n    const customTabsInstance = <CustomDiscussionTabNavigation />;\n\n    // Find toolbar using optimized path traversal\n    const toolbarPath = ['container', 'sideNavContainer', 'IndexPage-results', 'IndexPage-toolbar', 'IndexPage-toolbar-view'];\n    const toolbarDiv = findElementByPath({ children: originalChildren }, toolbarPath);\n\n    if (toolbarDiv) {\n      // Replace toolbar content with custom tabs\n      toolbarDiv.children = [customTabsInstance];\n    } else {\n      console.warn('IndexPage-toolbar-view not found. CustomTabNavigation not added.');\n    }\n\n    // Run component checks after render\n    setTimeout(runComponentChecks, 100);\n  });\n\n  // Adding scale font size feature\n  let currentScale = 1.05;\n\n  // Apply initial font zoom\n  applyFontZoom(currentScale);\n});\n\nfunction applyFontZoom(scale) {\n  // Remove existing font zoom styles\n  const existingStyle = document.getElementById('font-zoom-style');\n  if (existingStyle) {\n    existingStyle.remove();\n  }\n\n  // Create new style element\n  const style = document.createElement('style');\n  style.id = 'font-zoom-style';\n  \n  // Apply zoom to various elements\n  style.textContent = `\n    .App {\n      font-size: ${scale}rem !important;\n    }\n    \n    /* Ensure consistent scaling across all text elements */\n    .Post-body,\n    .PostPreview-body,\n    .UserCard-info,\n    .NotificationGrid-content,\n    .Dropdown-menu,\n    .Modal-body,\n    .Form-group label,\n    .Form-group input,\n    .Form-group textarea,\n    .TagLabel,\n    .Badge {\n      font-size: ${scale}em !important;\n    }\n    \n    /* Scale headings proportionally */\n    h1 { font-size: ${scale * 2}rem !important; }\n    h2 { font-size: ${scale * 1.5}rem !important; }\n    h3 { font-size: ${scale * 1.25}rem !important; }\n    h4 { font-size: ${scale * 1.125}rem !important; }\n    h5 { font-size: ${scale * 1}rem !important; }\n    h6 { font-size: ${scale * 0.875}rem !important; }\n    \n    /* Scale code blocks */\n    code,\n    pre {\n      font-size: ${scale * 0.875}em !important;\n    }\n  `;\n  \n  document.head.appendChild(style);\n  \n  // Store for guests as mitigate if improved\n  localStorage.setItem('flarum-font-zoom-scale', scale.toString());\n}","/**\n * Helper function to calculate time since in days\n */\nexport function getTimeSince(date) {\n  if (!date) return '-';\n\n  // Convert to Date object if string\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n  // Check if date is valid\n  if (isNaN(dateObj.getTime())) return '-';\n\n  const now = new Date();\n  const diffTime = now - dateObj;\n\n  // If time is in the future, return placeholder\n  if (diffTime < 0) return '-';\n\n  // Calculate time differences\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n  const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));\n\n  // Return only the largest time unit\n  if (diffDays >= 30) {\n    // More than a month, show months\n    const diffMonths = Math.floor(diffDays / 30);\n    return diffMonths + 'mo';\n  }\n\n  if (diffDays > 0) {\n    return diffDays + 'd';\n  }\n\n  if (diffHours > 0) {\n    return diffHours + 'h';\n  }\n\n  if (diffMinutes > 0) {\n    return diffMinutes + 'm';\n  }\n\n  // If less than a minute\n  return 'now';\n}\n\n/**\n * Helper function to get user initials\n */\nexport function getInitials(username) {\n  if (!username) return '';\n  return username.charAt(0).toUpperCase();\n}\n\n/**\n * Helper function to get color class based on index\n */\nexport function getColorClass(index) {\n  const colorClasses = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5'];\n  return colorClasses[index % colorClasses.length];\n}\n\n/**\n * Renders user avatar with either image or initials\n */\nexport function renderUserAvatar(user, index) {\n  if (!user) return null;\n\n  const userName = user.username || '';\n  const avatarUrl = user.avatar_url;\n\n  if (avatarUrl) {\n    // If avatar URL exists, render the image\n    return m(\n      'span.user-avatar',\n      { title: userName },\n      m('img.avatar-image', {\n        src: avatarUrl,\n        alt: userName,\n      })\n    );\n  } else {\n    // If no avatar URL, show initials with color background\n    return m(\n      'span.user-avatar',\n      { title: userName },\n      m(\n        'span.user-initial',\n        {\n          className: getColorClass(index),\n        },\n        getInitials(userName)\n      )\n    );\n  }\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['forum/components/HeaderPrimary'];","module.exports = flarum.core.compat['forum/components/HeaderSecondary'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/Search'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["setPrototypeOf","_inheritsLoose","t","o","prototype","Object","create","constructor","default","_setPrototypeOf","e","bind","__proto__","Component","getTimeSince","ActivityColumn","_Component","apply","arguments","_proto","view","discussion","attrs","lastPostedAt","timeSince","Date","m","app","Button","BackButton","customUrl","forum","attribute","trim","className","icon","onclick","goBack","title","translator","trans","startsWith","window","location","href","history","length","back","Link","TopicColumn","ReplyColumn","ViewColumn","LastUsersColumn","CustomDiscussionRow","route","LinkButton","CustomDiscussionTabNavigation","_app$search$params","_this","currentSort","search","params","sort","tabs","key","label","sortParam","map","tab","isActive","routeName","current","matches","isFilter","q","includes","filterParam","navigateTo","currentPath","get","basePath","split","newPath","set","DiscussionListHeader","Search","HeroSection","oninit","vnode","_forum$attribute","_forum$attribute2","call","enabled","mode","computeMode","flarum","extensions","setupNightModeListener","setupSystemModeListener","setTimeout","newMode","redraw","locale","getLocale","titleKey","descKey","description","showText","hasCustomColor","titleStyle","descriptionStyle","titleColor","subtitleColor","color","_document$cookie$spli","user","session","pref","preferences","fofNightMode","matchMedia","cookieValue","document","cookie","find","row","_this2","nightModeHandler","event","detail","addEventListener","_this3","mediaQuery","systemModeHandler","onremove","removeEventListener","getBackgroundStyle","bgAttr","bgUrl","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","height","undefined","pathname","backgroundStyle","style","state","renderUserAvatar","latestPosters","slice","i","Logo","_app$session$user","logoAttr","logoUrl","src","alt","_discussion$replyCoun","replyCount","firstPost","tags","isSticky","isLocked","tag","backgroundColor","name","contentPlain","viewCount","extend","IndexPage","SettingsPage","DiscussionListItem","DiscussionList","HeaderPrimary","HeaderSecondary","initializers","add","findElementByPath","path","_loop","_current","_step","value","children","Array","isArray","v","found","child","_child$attrs","_ret","_iterator","_createForOfIteratorHelperLoose","done","checkRegisterButtonVisibility","_app$forum","showRegisterButton","registerButton","querySelector","remove","error","console","checkCustomLogo","lightLogoPath","darkLogoPath","defaultLogo","runComponentChecks","initializeChecks","_app$history$initiali","readyState","initialized","then","router","on","items","has","originalChildren","concat","heroSectionInstance","customTabsInstance","toolbarPath","toolbarDiv","warn","currentScale","applyFontZoom","scale","existingStyle","getElementById","createElement","id","textContent","head","appendChild","localStorage","setItem","toString","date","dateObj","isNaN","getTime","now","diffTime","diffDays","Math","floor","diffHours","diffMinutes","diffMonths","getInitials","username","charAt","toUpperCase","getColorClass","index","colorClasses","userName","avatarUrl","avatar_url"],"sourceRoot":""}