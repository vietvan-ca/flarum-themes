(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var o=t.n(e);const n=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/components/IndexPage"];var i=t.n(r);const s=flarum.core.compat["forum/components/DiscussionListItem"];var a=t.n(s);const c=flarum.core.compat["forum/components/DiscussionList"];var u=t.n(c);const l=flarum.core.compat["forum/components/HeaderPrimary"];var d=t.n(l);function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function f(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,p(t,e)}const v=flarum.core.compat["common/Component"];var h=t.n(v);const b=flarum.core.compat["common/components/Link"];var y=t.n(b);const _=flarum.core.compat["common/helpers/icon"];var g=t.n(_),w=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.firstPost(),n=t.tags()||[],r=t.isSticky(),i=t.isLocked();return m("div.discussion-topic",[m("div.discussion-badges",[r?m("span.Badge.Badge--sticky",[g()("fas fa-thumbtack")]):null,i?m("span.Badge.Badge--locked",[g()("fas fa-lock")]):null]),m("div.discussion-title",[m(y(),{href:o().route.discussion(t)},t.title())]),m("div.discussion-tags",[n.map((function(t){return m("span.discussion-tag",{className:t.color()?"colored":"",style:t.color()?{backgroundColor:t.color()}:{}},t.name())}))]),!1!==o().forum.attribute("custom-discussion-list.enable_excerpts")?m("div.discussion-excerpt",(null==e?void 0:e.contentPlain())||""):null])},e}(h()),k=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){var t,e=null!=(t=this.attrs.discussion.replyCount())?t:0;return m("div.discussion-reply",[m("span",e)])},e}(h()),N=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("views")||0;return m("div.discussion-view",[m("span",t)])},e}(h());function x(t){var e=["color-1","color-2","color-3","color-4","color-5"];return e[t%e.length]}var L=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.lastPostedAt(),o=e?function(t){if(!t)return"-";var e="string"==typeof t?new Date(t):t;if(isNaN(e.getTime()))return"-";var o=new Date-e;if(o<0)return"-";var n=Math.floor(o/864e5),r=Math.floor(o%864e5/36e5),i=Math.floor(o%36e5/6e4);return n>=30?Math.floor(n/30)+"mo":n>0?n+"d":r>0?r+"h":i>0?i+"m":"now"}(new Date(e)):"",n=t.attribute("latestPosters")||[];return m("div.discussion-work",[m("div.time-since",o),m("div.active-users",n.slice(0,5).map((function(t,e){return function(t,e){if(!t)return null;var o,n=t.username||"",r=t.avatar_url;return r?m("span.user-avatar",{title:n},m("img.avatar-image",{src:r,alt:n})):m("span.user-avatar",{title:n},m("span.user-initial",{className:x(e)},(o=n)?o.charAt(0).toUpperCase():""))}(t,e)})))])},e}(h()),D=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){var t=this.attrs.discussion;return m(y(),{className:"discussion-row",href:o().route.discussion(t)},[m(w,{discussion:t}),m(k,{discussion:t}),m(N,{discussion:t}),m(L,{discussion:t})])},e}(h()),P=function(t){function e(){return t.apply(this,arguments)||this}return f(e,t),e.prototype.view=function(){return m("li",{className:"CustomDiscussionList-header"},m("div",{className:"DiscussionListItem-info topic"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.topic")),m("div",{className:"DiscussionListItem-info replies"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.replies")),m("div",{className:"DiscussionListItem-info views"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.views")),m("div",{className:"DiscussionListItem-info activity"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.activity")))},e}(h()),B=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var o=e.prototype;return o.oninit=function(e){var o,n,r;t.prototype.oninit.call(this,e);var i=app.forum;if(this.enabled="1"===i.attribute("vietvan_ca_hero_enabled"),this.enabled){this.locale=app.translator.getLocale()||"en";var s="vietvan_ca_hero_title_"+this.locale,a="vietvan_ca_hero_description_"+this.locale;this.title=null!=(o=i.attribute(s))?o:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.title"),this.description=null!=(n=i.attribute(a))?n:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.description"),this.showText="1"===i.attribute("vietvan_ca_hero_show_text");var c="dark"==(2===(null==(r=app.session.user)?void 0:r.preferences().fofNightMode)?"dark":"light")?"vietvan_ca_hero_background_image_darkUrl":"vietvan_ca_hero_background_imageUrl",u=i.attribute(c);this.style=u?{backgroundImage:"url("+u+")",backgroundPosition:"center",backgroundSize:"100% auto",backgroundRepeat:"no-repeat",height:"20vh"}:void 0}},o.view=function(){if(!this.enabled)return null;var t=window.location.pathname;return"/"!==t&&""!==t?null:m("div",{className:"HeroSection",style:this.style},this.showText&&m("div",{className:"container"},m("h1",{className:"HeroSection-title"},this.title),m("p",{className:"HeroSection-subtitle"},this.description)))},e}(h());const O=flarum.core.compat["common/components/Button"];var S=t.n(O),I=function(t){function e(){return t.apply(this,arguments)||this}f(e,t);var n=e.prototype;return n.view=function(){var t=o().forum.attribute("vietvan_ca_back_button_custom_url");return t&&""!==t.trim()?m(S(),{className:"Button Button--link Header-back",icon:"fas fa-chevron-left",onclick:this.goBack.bind(this),title:o().translator.trans("vietvan-ca-flarum-themes.forum.header.back_button_tooltip")},o().translator.trans("vietvan-ca-flarum-themes.forum.header.back_button_text")||"Back"):null},n.goBack=function(){var t=o().forum.attribute("vietvan_ca_back_button_custom_url");t&&""!==t.trim()?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//")?window.location.href=t:window.location.href=o().forum.attribute("baseUrl")+t:window.history.length>1?window.history.back():window.location.href="/"},e}(h());o().initializers.add("vietvan-ca-themes",(function(){var t,e=function(){try{if(o().forum&&o().forum.attribute){if("1"!==o().forum.attribute("vietvan_ca_show_register_button")){var t=document.querySelector(".item-signUp");t&&t.remove()}}else console.log("app.forum not ready yet")}catch(t){console.error("Error checking register button visibility:",t)}};"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,100):document.addEventListener("DOMContentLoaded",(function(){setTimeout(e,100)})),null==(t=o().history.initialized)||t.then((function(){o().history.router.on("changed",e)})),(0,n.extend)(d().prototype,"items",(function(t){t.add("back-button",m(I,null),90)})),(0,n.extend)(a().prototype,"view",(function(t){t.children=[m(D,{discussion:this.attrs.discussion})]})),(0,n.extend)(u().prototype,"view",(function(t){var e=t.children;t.children=[m("ul.DiscussionList",[m(P)].concat(e))]})),(0,n.extend)(i().prototype,"view",(function(t){var o=m(B),n=t.children;t.children=[o].concat(n),setTimeout(e,100)}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map