(()=>{var t={n:e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},d:(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var o=t.n(e);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var a=t.n(n);const i=flarum.core.compat["forum/components/DiscussionListItem"];var s=t.n(i);const l=flarum.core.compat["forum/components/DiscussionList"];var u=t.n(l);const c=flarum.core.compat["forum/components/HeaderPrimary"];var d=t.n(c);const f=flarum.core.compat["forum/components/HeaderSecondary"];var p=t.n(f);const h=flarum.core.compat["common/components/TextEditor"];var v=t.n(h);flarum.core.compat["forum/utils/DiscussionControls"];const g=flarum.core.compat["common/components/Button"];var b=t.n(g);function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function w(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,y(t,e)}const M=flarum.core.compat["common/Component"];var _=t.n(M);const N=flarum.core.compat["common/components/Link"];var C=t.n(N);const k=flarum.core.compat["common/helpers/icon"];var D=t.n(k),S=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.firstPost(),r=t.tags()||[],n=t.isSticky(),a=t.isLocked();return m("div.discussion-topic",[m("div.discussion-badges",[n?m("span.Badge.Badge--sticky",[D()("fas fa-thumbtack")]):null,a?m("span.Badge.Badge--locked",[D()("fas fa-lock")]):null]),m("div.discussion-title",[m(C(),{href:o().route.discussion(t)},t.title())]),m("div.discussion-tags",[r.map((function(t){return m("span.discussion-tag",{className:t.color()?"colored":"",style:t.color()?{backgroundColor:t.color()}:{}},t.name())}))]),!1!==o().forum.attribute("custom-discussion-list.enable_excerpts")?m("div.discussion-excerpt",(null==e?void 0:e.contentPlain())||""):null])},e}(_()),I=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t,e=null!=(t=this.attrs.discussion.replyCount())?t:0;return m("div.discussion-reply",[m("span",e)])},e}(_()),B=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("views")||0;return m("div.discussion-view",[m("span",t)])},e}(_());function x(t){var e=["color-1","color-2","color-3","color-4","color-5"];return e[t%e.length]}var L=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t=this.attrs.discussion.lastPostedAt(),e=t?function(t){if(!t)return"-";var e="string"==typeof t?new Date(t):t;if(isNaN(e.getTime()))return"-";var o=new Date-e;if(o<0)return"-";var r=Math.floor(o/864e5),n=Math.floor(o%864e5/36e5),a=Math.floor(o%36e5/6e4);return r>=30?Math.floor(r/30)+"mo":r>0?r+"d":n>0?n+"h":a>0?a+"m":"now"}(new Date(t)):"";return m("div.discussion-activity",[m("span",e)])},e}(_()),T=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("latestPosters")||[];return m("div.discussion-users",[m("div.active-users",t.slice(0,5).map((function(t,e){return function(t,e){if(!t)return null;var o,r=t.username||"",n=t.avatar_url;return n?m("span.user-avatar",{title:r},m("img.avatar-image",{src:n,alt:r})):m("span.user-avatar",{title:r},m("span.user-initial",{className:x(e)},(o=r)?o.charAt(0).toUpperCase():""))}(t,e)})))])},e}(_()),P=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){var t=this.attrs.discussion;return m(C(),{className:"discussion-row",href:o().route.discussion(t)},[m(S,{discussion:t}),m(T,{discussion:t}),m(I,{discussion:t}),m(B,{discussion:t}),m(L,{discussion:t})])},e}(_()),E=function(t){function e(){return t.apply(this,arguments)||this}return w(e,t),e.prototype.view=function(){return m("li",{className:"CustomDiscussionList-header"},m("div",{className:"DiscussionListItem-info topic"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.topic")),m("div",{className:"DiscussionListItem-info replies"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.replies")),m("div",{className:"DiscussionListItem-info views"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.views")),m("div",{className:"DiscussionListItem-info activity"},o().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.activity")))},e}(_());const A=flarum.core.compat["forum/components/Search"];var q=t.n(A);const z=flarum.core.compat["forum/components/DiscussionComposer"];var O=t.n(z);const U=flarum.core.compat["forum/components/LogInModal"];var H=t.n(U);const j=flarum.core.compat["common/components/LinkButton"];var G=t.n(j);const F=flarum.core.compat["common/utils/ItemList"];var R=t.n(F);const V=flarum.core.compat["common/components/SelectDropdown"];var $=t.n(V);const W=flarum.core.compat["common/helpers/listItems"];var J=t.n(W),K=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.view=function(){var t=this;return m("div",{className:"CustomMobileDiscussionToolbar"},m("div",{className:"CustomMobileDiscussionToolbar-left"},m("span",{className:"CustomMobileDiscussionToolbar-date"},this.currentDate),$().component({buttonClassName:"Button Button--text",className:"all-discussion-select"},this.getNavigationItems().toArray())),m("button",{class:"Button Button--primary CustomMobileDiscussionToolbar-button",type:"button","aria-label":"Start Discussion",onclick:function(){return t.newDiscussionAction()}},m("i",{"aria-hidden":"true",class:"icon fas fa-edit Button-icon"}),m("span",{class:"Button-label"},o().translator.trans("core.forum.index.start_discussion_button"))))},r.getNavigationItems=function(){var t=new(R());t.add("all-discussions",G().component({href:o().route("index"),icon:"fas fa-comments"},o().translator.trans("core.forum.index.all_discussions_link")),100),t.add("tags",G().component({href:o().route("tags"),icon:"fas fa-th-large"},o().translator.trans("flarum-tags.forum.index.tags_link")),90);var e=o().store.all("tags");return e&&e.length>0&&e.filter((function(t){var e=t.parent&&t.parent(),o=t.position();return!e&&null!=o})).sort((function(t,e){return t.position()-e.position()})).forEach((function(e,r){t.add("tag-"+e.id(),G().component({href:o().route("tag",{tags:e.slug()}),icon:"fas fa-circle",style:e.color()?{color:e.color()}:{}},e.name()),80-r)})),t},r.newDiscussionAction=function(){return new Promise((function(t,e){return o().session.user?(o().composer.load(O(),{user:o().session.user}),o().composer.show(),t(o().composer)):(o().modal.show(H()),e())}))},e}(_()),Q=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var o=e.prototype;return o.oninit=function(e){var o,r,n=this;t.prototype.oninit.call(this,e);var a=app.forum;if(this.enabled="1"===a.attribute("vietvan_ca_hero_enabled"),this.enabled){this.mode="light",flarum.extensions["fof-nightmode"]&&this.setupNightModeListener(),this.setupSystemModeListener(),this.setupBodyClassObserver(),setTimeout((function(){n.mode=n.computeMode(),m.redraw()}),100),setTimeout((function(){var t=n.computeMode();t!==n.mode&&(n.mode=t,m.redraw())}),500),this.locale=app.translator.getLocale()||"en";var i="vietvan_ca_hero_title_"+this.locale,s="vietvan_ca_hero_description_"+this.locale;if(this.title=null!=(o=a.attribute(i))?o:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.title"),this.description=null!=(r=a.attribute(s))?r:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.description"),this.showText="1"===a.attribute("vietvan_ca_hero_show_text"),this.hasCustomColor="1"===a.attribute("vietvan_ca_hero_custom_color_enabled"),this.titleStyle={},this.descriptionStyle={},this.hasCustomColor){var l=a.attribute("vietvan_ca_hero_title_color")||"#ffffff",u=a.attribute("vietvan_ca_hero_subtitle_color")||"#ffffff";this.titleStyle={color:l},this.descriptionStyle={color:u}}}},o.computeMode=function(){var t;if(document.body.classList.contains("flarum--night"))return"dark";var e=app.session.user;if(e){var o=e.preferences().fofNightMode;return 2===o||"2"===o?"dark":1===o||"1"===o||0!==o&&"0"!==o&&null!=o||0!==o&&"0"!==o||!window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark"}var r=null==(t=document.cookie.split("; ").find((function(t){return t.startsWith("flarum_nightmode=")})))?void 0:t.split("=")[1];return"2"===r?"dark":"1"===r?"light":"0"===r&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},o.setupNightModeListener=function(){var t=this;this.nightModeHandler=function(e){t.mode="day"===e.detail?"light":"dark",m.redraw()},document.addEventListener("fofnightmodechange",this.nightModeHandler)},o.setupSystemModeListener=function(){var t=this,e=window.matchMedia("(prefers-color-scheme: dark)");this.systemModeHandler=function(e){var o=t.computeMode();o!==t.mode&&(t.mode=o,m.redraw())},e.addEventListener("change",this.systemModeHandler)},o.setupBodyClassObserver=function(){var t=this;this.bodyObserver=new MutationObserver((function(){var e=t.computeMode();e!==t.mode&&(t.mode=e,m.redraw())})),this.bodyObserver.observe(document.body,{attributes:!0,attributeFilter:["class"]})},o.onremove=function(){this.nightModeHandler&&document.removeEventListener("fofnightmodechange",this.nightModeHandler),this.systemModeHandler&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.systemModeHandler),this.bodyObserver&&this.bodyObserver.disconnect()},o.getBackgroundStyle=function(){var t=app.forum,e="dark"===this.mode?"vietvan_ca_hero_background_image_darkUrl":"vietvan_ca_hero_background_imageUrl",o=t.attribute(e);return o?{height:"35vh",backgroundImage:"url("+o+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:void 0},o.view=function(){if(!this.enabled)return null;var t=window.location.pathname;if("/"!==t&&""!==t)return null;var e=this.getBackgroundStyle();return m("div",{className:"HeroSection",style:e},this.showText&&m("div",{className:"container"},m("h1",{className:"HeroSection-title",style:this.titleStyle},this.title),m("p",{className:"HeroSection-subtitle",style:this.descriptionStyle},this.description)),m("div",{className:"container"},m(q(),{state:app.search})))},e}(_()),X=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.oninit=function(e){var r;t.prototype.oninit.call(this,e),this.mode=2===(null==(r=o().session.user)?void 0:r.preferences().fofNightMode)?"dark":"light",flarum.extensions["fof-nightmode"]&&this.setupNightModeListener()},r.setupNightModeListener=function(){var t=this;document.addEventListener("fofnightmodechange",(function(e){t.mode="day"===e.detail?"light":"dark",m.redraw()}))},r.view=function(t){var e="dark"===this.mode?"vietvan_ca_logo_darkUrl":"vietvan_ca_logoUrl",r=o().forum.attribute(e);if(!r)return null;var n=o().forum.attribute("vietvan_ca_back_button_custom_url")||o().route("index"),a=t.attrs.imageStyle||{};return m("a",{href:n,className:"Header-logo CustomHeaderLogo"},m("img",{src:r,alt:"VietVan CA",style:a}))},e}(_()),Y=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.view=function(){var t,e=this,r=null==(t=o().search.params())?void 0:t.sort,n=[{key:"latest",label:o().translator.trans("core.forum.index_sort.latest_button"),sortParam:"",default:!0},{key:"top",label:o().translator.trans("core.forum.index_sort.top_button"),sortParam:"top"},{key:"newest",label:o().translator.trans("core.forum.index_sort.newest_button"),sortParam:"newest"},{key:"oldest",label:o().translator.trans("core.forum.index_sort.oldest_button"),sortParam:"oldest"}];return m("div",{className:"CustomDiscussionTabNavigation"},n.map((function(t){var n;return n=t.routeName?o().current.matches(t.routeName):t.isFilter?o().search.params.q&&o().search.params.q.includes(t.filterParam):r===t.sortParam||!r&&t.default,m(G(),{className:"SortItem Button Button--link "+(n?"active":""),onclick:function(){return e.navigateTo(t)}},t.label)})))},r.navigateTo=function(t){var e=m.route.get().split("?")[0];t.default||(e+="?sort="+t.sortParam),m.route.set(e)},e}(_());function Z(t,e){var r=o().translator.trans("vietvan-ca-flarum-themes.forum.mobile_drawer."+t);return r&&r!=="vietvan-ca-flarum-themes.forum.mobile_drawer."+t?r:e}flarum.core.compat["common/components/Separator"];var tt=function(t){function e(){return t.apply(this,arguments)||this}w(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e)},r.view=function(){return m("div",{className:"CustomMobileDrawer"},m("div",{className:"CustomMobileDrawer-logo"},m(X,{imageStyle:{height:"40px"}})),m("nav",{className:"CustomMobileDrawer-nav"},m("ul",{className:"CustomMobileDrawer-menu"},J()(this.menuItems().toArray()))),m("div",{className:"CustomMobileDrawer-separator"}),m("div",{className:"CustomMobileDrawer-auth"},o().session.user?this.loggedInSection():this.guestSection()))},r.menuItems=function(){var t=new(R()),e=o().forum.attribute("vietvan_ca_back_button_custom_url")||o().forum.attribute("baseUrl").replace("/forum","");t.add("home",m("li",{className:"CustomMobileDrawer-menuItem"},m("a",{href:e,className:"CustomMobileDrawer-link"},Z("home","Trang Chủ"))),100),t.add("forum",m("li",{className:"CustomMobileDrawer-menuItem active"},m("a",{href:o().forum.attribute("baseUrl"),className:"CustomMobileDrawer-link"},Z("forum","Diễn Đàn"))),90);var r=this.findTagBySlug("luu-y")||this.findTagBySlug("guidelines");return r&&t.add("guidelines",m("li",{className:"CustomMobileDrawer-menuItem"},m("a",{href:o().route("tag",{tags:r.slug()}),className:"CustomMobileDrawer-link"},Z("guidelines","Lưu ý"))),80),t.add("language",m("li",{className:"CustomMobileDrawer-menuItem CustomMobileDrawer-menuItem--dropdown"},this.languageDropdown()),70),t.add("theme",m("li",{className:"CustomMobileDrawer-menuItem CustomMobileDrawer-menuItem--dropdown"},this.themeToggle()),60),t},r.findTagBySlug=function(t){return o().store&&o().store.all?o().store.all("tags").find((function(e){return e.slug()===t})):null},r.languageDropdown=function(){var t=this,e=o().data.locales||{},r=o().data.locale||"en";return Object.keys(e).length<=1?m("div",{className:"CustomMobileDrawer-languageDisplay"},m("span",{className:"CustomMobileDrawer-link"},this.getLocaleName(r),m("i",{className:"fas fa-globe CustomMobileDrawer-icon"}))):m("div",{className:"CustomMobileDrawer-dropdown"},m("button",{className:"CustomMobileDrawer-link CustomMobileDrawer-dropdownTrigger",onclick:function(e){return t.toggleDropdown(e,"language")}},this.getLocaleName(r),m("i",{className:"fas fa-chevron-down CustomMobileDrawer-chevron"})),m("ul",{className:"CustomMobileDrawer-dropdownMenu",id:"language-dropdown"},Object.keys(e).map((function(o){return m("li",{key:o},m("a",{href:"javascript:void(0)",onclick:function(){return t.changeLocale(o)},className:r===o?"active":""},e[o]))}))))},r.getLocaleName=function(t){var e;return{en:"English",vi:"Tiếng Việt"}[t]||(null==(e=o().data.locales)?void 0:e[t])||t},r.changeLocale=function(t){o().session.user?o().session.user.savePreferences({locale:t}).then((function(){window.location.reload()})):(document.cookie="locale="+t+";path=/;max-age=31536000",window.location.reload())},r.themeToggle=function(){var t=this;return o().forum.attribute("darkMode")||localStorage.getItem("fofNightMode"),m("button",{className:"CustomMobileDrawer-link",onclick:function(){return t.toggleTheme()}},m("i",{className:"fas fa-cog CustomMobileDrawer-icon--left"}),Z("appearance","Giao Diện"))},r.toggleTheme=function(){var t=document.querySelector(".item-nightMode button, .NightMode-toggle");if(t)t.click();else{document.body.classList.toggle("dark");var e=document.body.classList.contains("dark");localStorage.setItem("fofNightMode",e?"dark":"light")}},r.toggleDropdown=function(t,e){t.preventDefault(),t.stopPropagation();var o=document.getElementById(e+"-dropdown");o&&o.classList.toggle("open")},r.guestSection=function(){var t=this,e=o().forum.attribute("vietvan_ca_back_button_custom_url")||"",r=e?e.replace("/forum","").replace(/\/$/,""):"",n=o().forum.attribute("jwt-sso.login_url")||r+"/auth/login";return m("div",{className:"CustomMobileDrawer-guest"},m("a",{href:r+"/auth/register",className:"Button Button--primary CustomMobileDrawer-registerBtn"},Z("register","Đăng ký")),m("a",{href:n,className:"Button Button--secondary CustomMobileDrawer-loginBtn"},Z("login","Đăng nhập")),m("div",{className:"CustomMobileDrawer-socialSeparator"},m("span",null,Z("or","Hoặc:"))),m("div",{className:"CustomMobileDrawer-socialButtons"},m("button",{className:"Button CustomMobileDrawer-socialBtn CustomMobileDrawer-socialBtn--facebook",onclick:function(){return t.socialLogin("facebook")}},m("i",{className:"fab fa-facebook CustomMobileDrawer-socialIcon"}),Z("login_facebook","Đăng nhập bằng Facebook")),m("button",{className:"Button CustomMobileDrawer-socialBtn CustomMobileDrawer-socialBtn--google",onclick:function(){return t.socialLogin("google")}},m("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"CustomMobileDrawer-socialIcon CustomMobileDrawer-socialIcon--img"}),Z("login_google","Đăng nhập bằng Google"))))},r.socialLogin=function(t){var e=o().forum.attribute("vietvan_ca_back_button_custom_url")||"",r=e?e.replace("/forum","").replace(/\/$/,""):"",n=encodeURIComponent(window.location.href);window.location.href=r+"/auth/"+t+"?redirect="+n},r.loggedInSection=function(){var t=this,e=o().session.user;return m("div",{className:"CustomMobileDrawer-user"},m("div",{className:"CustomMobileDrawer-userInfo"},m("div",{className:"CustomMobileDrawer-avatar"},m("img",{src:e.avatarUrl(),alt:e.displayName()})),m("div",{className:"CustomMobileDrawer-userName"},m("span",{className:"CustomMobileDrawer-displayName"},e.displayName()))),m("ul",{className:"CustomMobileDrawer-userMenu"},m("li",null,m("a",{href:o().route.user(e),className:"CustomMobileDrawer-link"},m("i",{className:"fas fa-user CustomMobileDrawer-icon--left"}),Z("profile","Trang cá nhân"))),m("li",null,m("a",{href:o().route("settings"),className:"CustomMobileDrawer-link"},m("i",{className:"fas fa-cog CustomMobileDrawer-icon--left"}),Z("settings","Cài đặt tài khoản"))),m("li",null,m("button",{className:"CustomMobileDrawer-link CustomMobileDrawer-logout",onclick:function(){return t.logout()}},m("i",{className:"fas fa-sign-out-alt CustomMobileDrawer-icon--left"}),Z("logout","Đăng xuất")))))},r.logout=function(){var t=Z("logout_confirm","Bạn có chắc chắn muốn đăng xuất?");confirm(t)&&o().session.logout()},e}(_());function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=Array(e);o<e;o++)r[o]=t[o];return r}o().initializers.add("vietvan-ca-themes",(function(){var t,e=function(){document.querySelectorAll(".item-hide button .fa-trash-alt").forEach((function(t){t.classList.contains("fa-trash-alt")&&(t.classList.remove("fa-trash-alt"),t.classList.add("fa-eye"))})),document.querySelectorAll(".item-hidden .fas.fa-trash, .Badge--hidden .fas.fa-trash").forEach((function(t){t.classList.contains("fa-trash")&&(t.classList.remove("fa-trash"),t.classList.add("fa-eye"))}))};setTimeout(e,500),null!=(t=o().history)&&t.initialized&&o().history.initialized.then((function(){o().history.router.on("changed",(function(){setTimeout(e,500)}))})),setInterval(e,2e3),setTimeout((function(){o().session.user&&(null==o().session.user.preferences().fofNightMode&&o().session.user.savePreferences({fofNightMode:!1}).catch((function(){})));var t=document.body,e=document.documentElement;"true"===localStorage.getItem("fof-nightmode")||"true"===localStorage.getItem("darkMode")||[t,e].forEach((function(t){t&&["dark","dark-mode","fof-nightmode"].forEach((function(e){t.classList.remove(e)}))}))}),100);var n,i=function(){document.querySelectorAll(".discussion-tag.colored").forEach((function(t){return l(t,"backgroundColor")})),document.querySelectorAll('.Button--tagColored, .Button--primary[style*="--color"]').forEach((function(t){var e=t.style.getPropertyValue("--color");e&&l(t,"customColor",e)}))},l=function(t,e,o){var r,n,a,i;if(void 0===o&&(o=null),(r="customColor"===e&&o?o:window.getComputedStyle(t).backgroundColor).startsWith("#")){var s=r.replace("#","");if(3===s.length)n=parseInt(s.substr(0,1)+s.substr(0,1),16),a=parseInt(s.substr(1,1)+s.substr(1,1),16),i=parseInt(s.substr(2,1)+s.substr(2,1),16);else{if(6!==s.length)return;n=parseInt(s.substr(0,2),16),a=parseInt(s.substr(2,2),16),i=parseInt(s.substr(4,2),16)}}else{var l=r.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(!l)return;var u=l.map(Number);n=u[1],a=u[2],i=u[3]}var c=(.299*n+.587*a+.114*i)/255,m=Math.sqrt(.241*n*n+.691*a*a+.068*i*i)/255,d=(n+a+i)/765,f=Math.max(n,a,i)/255,p=Math.min(n,a,i)/255,h=0===f?0:(f-p)/f,v=(Math.max(c,.05)+.05)/.1,g=1.05/(Math.max(c,.05)+.05),b=h>.8&&c>.7?.6:h>.4?.75:.65,y=c>b&&m>b-.1&&d>b-.15&&v>g;t.style.setProperty("color",y?"#000000":"#ffffff","important");var w=y?"0 0 1px rgba(255, 255, 255, 0.6)":"0 0 1px rgba(0, 0, 0, 0.8)";t.style.setProperty("text-shadow",w,"important"),"customColor"===e&&o&&(t.style.setProperty("background-color",o,"important"),t.classList.remove("text-contrast--dark","text-contrast--light"))};setTimeout(i,200),null!=(n=o().history)&&n.initialized&&o().history.initialized.then((function(){o().history.router.on("changed",(function(){setTimeout(i,200)}))})),setInterval(i,3e3),new MutationObserver((function(){setTimeout(i,100)})).observe(document.body,{childList:!0,subtree:!0}),(0,r.extend)(v().prototype,"controlItems",(function(t){console.log("Available controlItems:",Array.from(t.toArray().map((function(t){return t.itemName})))),t.has("fof-upload-media")&&(console.log("Removing fof-upload-media from controlItems to move to toolbar"),t.remove("fof-upload-media")),["fof-upload","fofUpload","upload","rich-text","richText","emoji","preview"].forEach((function(e){t.has(e)&&(console.log("Removing controlItem:",e),t.remove(e))})),t.has("TextEditor-toolbar")&&t.setPriority("TextEditor-toolbar",90),t.has("mention")&&t.setPriority("mention",80),t.has("submit")&&t.setPriority("submit",-100)})),(0,r.extend)(v().prototype,"toolbarItems",(function(t){console.log("Available toolbarItems:",Array.from(t.toArray().map((function(t){return t.itemName})))),["nodeType","node_type","code","quote","link","image","more","additional","extra"].forEach((function(e){t.has(e)&&(console.log("Removing toolbarItem:",e),t.remove(e))}));var e=b().component({icon:"fas fa-photo-video",className:"Button Button--icon Button--link",title:o().translator.trans("fof-upload.forum.buttons.media",{},"Media"),onclick:function(t){t.preventDefault();var e=document.querySelector(".item-fof-upload-media .fof-upload-button");e?e.click():console.warn("Could not find original media upload button")}});t.add("fof-upload-media-toolbar",e,65),t.has("bold")&&t.setPriority("bold",100),t.has("italic")&&t.setPriority("italic",90),t.has("bullet_list")&&t.setPriority("bullet_list",80),t.has("ordered_list")&&t.setPriority("ordered_list",70)}));var c,f=function(){var t=document.querySelector(".item-fof-upload-media"),e=document.querySelector(".item-fof-upload-media .fof-upload-button"),o=document.querySelector('button[aria-label*="Numbered list" i]');if(e&&o&&t&&!document.querySelector(".toolbar-media-button")&&o.closest(".ProseMirrorMenu")){var r=e.cloneNode(!0);r.className="Button Button--icon Button--link CommandButton",r.title=e.getAttribute("aria-label")||"My media";var n=document.createElement("div");n.className="toolbar-media-button",n.appendChild(r),o.parentNode.insertBefore(n,o.nextSibling),t.style.display="none",console.log("Moved media button to toolbar")}document.querySelectorAll(".item-fof-upload:not(.item-fof-upload-media)").forEach((function(t){return t.style.display="none"})),document.querySelectorAll(".NodeTypeButton, .NodeTypeDropdownMenu").forEach((function(t){if(t.closest){var e=t.closest(".ButtonGroup.Dropdown");e&&(e.style.display="none")}})),document.querySelectorAll('button[aria-label*="link" i], button[title*="link" i]').forEach((function(t){if(t.querySelector(".fa-link")){var e=t.closest(".ButtonGroup.Dropdown");e&&(e.style.display="none")}})),document.querySelectorAll('button[aria-label*="image" i], button[title*="image" i]').forEach((function(t){if(t.querySelector(".fa-image")){var e=t.closest(".ButtonGroup.Dropdown");e&&(e.style.display="none")}})),document.querySelectorAll('button[aria-label*="Additional Controls" i], button[title*="Additional Controls" i]').forEach((function(t){if(t.querySelector(".fa-plus")){var e=t.closest(".ButtonGroup.Dropdown");e&&(e.style.display="none")}})),[".fa-file-upload",".fa-link",".fa-image",".fa-plus"].forEach((function(t){document.querySelectorAll(t).forEach((function(t){var e=t.closest("button");if(e){var o,r=e.closest(".ButtonGroup.Dropdown");r?r.style.display="none":t.classList.contains("fa-photo-video")||(null==(o=e.getAttribute("aria-label"))?void 0:o.toLowerCase().includes("media"))||(e.style.display="none")}}))}))};setTimeout(f,300),null!=(c=o().history)&&c.initialized&&o().history.initialized.then((function(){o().history.router.on("changed",(function(){setTimeout(f,300)}))})),new MutationObserver((function(){setTimeout(f,100)})).observe(document.body,{childList:!0,subtree:!0}),setInterval(f,2e3),(0,r.extend)(a().prototype,"oncreate",(function(){this.injectCustomDrawer()})),(0,r.extend)(a().prototype,"onupdate",(function(){this.injectCustomDrawer()})),a().prototype.injectCustomDrawer=function(){var t=document.getElementById("drawer");if(t&&!t.querySelector(".CustomMobileDrawer")){var e=t.querySelector(".Drawer-content, .App-drawer");if(e){var o=e.querySelector(".CustomMobileDrawer-container");o||((o=document.createElement("div")).className="CustomMobileDrawer-container",m.mount(o,tt),e.insertBefore(o,e.firstChild))}}};var h,g=function(){!function(){try{var t;if(null!=(t=o().forum)&&t.attribute&&"1"!==o().forum.attribute("vietvan_ca_show_register_button")){var e=document.querySelector(".item-signUp");null==e||e.remove()}}catch(t){console.error("Error checking register button visibility:",t)}}(),function(){try{var t=o().forum.attribute("vietvan_ca_logoUrl"),e=o().forum.attribute("vietvan_ca_logo_darkUrl");if(t||e){var r=document.querySelector(".Header-title");null==r||r.remove()}}catch(t){console.error("Error checking custom logo:",t)}}()};"complete"===document.readyState||"interactive"===document.readyState?setTimeout(g,100):document.addEventListener("DOMContentLoaded",(function(){setTimeout(g,100)})),null==(h=o().history.initialized)||h.then((function(){o().history.router.on("changed",g)})),(0,r.extend)(d().prototype,"items",(function(t){var e=o().forum.attribute("vietvan_ca_logoUrl"),r=o().forum.attribute("vietvan_ca_logo_darkUrl");(e||r)&&t.add("logo",m(X,null),90)})),(0,r.extend)(p().prototype,"items",(function(t){t.has("search")&&t.remove("search")})),(0,r.extend)(s().prototype,"view",(function(t){t.children=[m(P,{discussion:this.attrs.discussion})]})),(0,r.extend)(u().prototype,"view",(function(t){var e=t.children;t.children=[m("ul.DiscussionList",[m(E)].concat(e))]})),(0,r.extend)(a().prototype,"view",(function(t){var e=m(Q),o=t.children;t.children=[e].concat(o);var r=m(K,null),n=m(Y,null),a=function(t){for(var e,o,r=t,n=function(){var t,e=o.value;if(null==(t=r)||!t.children||!Array.isArray(r.children))return{v:null};var n=r.children.find((function(t){var o;return null==t||null==(o=t.attrs)||null==(o=o.className)?void 0:o.includes(e)}));if(!n)return{v:null};r=n},a=function(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(o)return(o=o.call(t)).next.bind(o);if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return et(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?et(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(["container","sideNavContainer","IndexPage-results","IndexPage-toolbar","IndexPage-toolbar-view"]);!(o=a()).done;)if(e=n())return e.v;return r}({children:o});a?a.children=[r,n]:console.warn("IndexPage-toolbar-view not found. CustomTabNavigation not added."),setTimeout(g,100)})),(0,r.extend)(a().prototype,"oncreate",(function(){var t=o().forum.attribute("vietvan_ca_logoUrl"),e=o().forum.attribute("vietvan_ca_logo_darkUrl");(t||e)&&this.addMobileLogo()})),(0,r.extend)(a().prototype,"onupdate",(function(){var t=o().forum.attribute("vietvan_ca_logoUrl"),e=o().forum.attribute("vietvan_ca_logo_darkUrl");(t||e)&&this.addMobileLogo()})),a().prototype.addMobileLogo=function(){var t=document.getElementById("app-navigation");if(t&&!t.querySelector(".Navigation-logo")){var e=document.createElement("div");e.className="Navigation-logo Mobile-only",m.mount(e,{view:function(){return m(X,{imageStyle:{height:"30px"}})}});var o=t.querySelector(".App-backControl");o?t.insertBefore(e,o):t.insertBefore(e,t.firstChild)}},(0,r.extend)(a().prototype,"onremove",(function(){var t=document.getElementById("app-navigation"),e=null==t?void 0:t.querySelector(".Navigation-logo");e&&(m.mount(e,null),e.remove())})),function(t){var e=document.getElementById("font-zoom-style");e&&e.remove();var o=document.createElement("style");o.id="font-zoom-style",o.textContent="\n    .App {\n      font-size: 1.05rem !important;\n    }\n    \n    /* Ensure consistent scaling across all text elements */\n    .Post-body,\n    .PostPreview-body,\n    .UserCard-info,\n    .NotificationGrid-content,\n    .Dropdown-menu,\n    .Modal-body,\n    .Form-group label,\n    .Form-group input,\n    .Form-group textarea,\n    .TagLabel,\n    .Badge {\n      font-size: 1.05em !important;\n    }\n    \n    /* Scale headings proportionally */\n    h1 { font-size: 2.1rem !important; }\n    h2 { font-size: "+1.5*t+"rem !important; }\n    h3 { font-size: 1.3125rem !important; }\n    h4 { font-size: "+1.125*t+"rem !important; }\n    h5 { font-size: 1.05rem !important; }\n    h6 { font-size: "+.875*t+"rem !important; }\n    \n    /* Scale code blocks */\n    code,\n    pre {\n      font-size: "+.875*t+"em !important;\n    }\n  ",document.head.appendChild(o),localStorage.setItem("flarum-font-zoom-scale",t.toString())}(1.05)}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map