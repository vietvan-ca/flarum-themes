(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var r=t.n(e);const o=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var i=t.n(n);flarum.core.compat["forum/components/SettingsPage"];const a=flarum.core.compat["forum/components/DiscussionListItem"];var s=t.n(a);const c=flarum.core.compat["forum/components/DiscussionList"];var u=t.n(c);const l=flarum.core.compat["forum/components/HeaderPrimary"];var d=t.n(l);const f=flarum.core.compat["forum/components/HeaderSecondary"];var v=t.n(f);function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}flarum.core.compat["common/components/TextEditor"];const y=flarum.core.compat["common/Component"];var g=t.n(y);const b=flarum.core.compat["common/components/Link"];var _=t.n(b);const w=flarum.core.compat["common/helpers/icon"];var k=t.n(w),M=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.firstPost(),o=t.tags()||[],n=t.isSticky(),i=t.isLocked();return m("div.discussion-topic",[m("div.discussion-badges",[n?m("span.Badge.Badge--sticky",[k()("fas fa-thumbtack")]):null,i?m("span.Badge.Badge--locked",[k()("fas fa-lock")]):null]),m("div.discussion-title",[m(_(),{href:r().route.discussion(t)},t.title())]),m("div.discussion-tags",[o.map((function(t){return m("span.discussion-tag",{className:t.color()?"colored":"",style:t.color()?{backgroundColor:t.color()}:{}},t.name())}))]),!1!==r().forum.attribute("custom-discussion-list.enable_excerpts")?m("div.discussion-excerpt",(null==e?void 0:e.contentPlain())||""):null])},e}(g()),S=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t,e=null!=(t=this.attrs.discussion.replyCount())?t:0;return m("div.discussion-reply",[m("span",e)])},e}(g()),N=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("views")||0;return m("div.discussion-view",[m("span",t)])},e}(g());function x(t){var e=["color-1","color-2","color-3","color-4","color-5"];return e[t%e.length]}var L=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion.lastPostedAt(),e=t?function(t){if(!t)return"-";var e="string"==typeof t?new Date(t):t;if(isNaN(e.getTime()))return"-";var r=new Date-e;if(r<0)return"-";var o=Math.floor(r/864e5),n=Math.floor(r%864e5/36e5),i=Math.floor(r%36e5/6e4);return o>=30?Math.floor(o/30)+"mo":o>0?o+"d":n>0?n+"h":i>0?i+"m":"now"}(new Date(t)):"";return m("div.discussion-activity",[m("span",e)])},e}(g()),P=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("latestPosters")||[];return m("div.discussion-users",[m("div.active-users",t.slice(0,5).map((function(t,e){return function(t,e){if(!t)return null;var r,o=t.username||"",n=t.avatar_url;return n?m("span.user-avatar",{title:o},m("img.avatar-image",{src:n,alt:o})):m("span.user-avatar",{title:o},m("span.user-initial",{className:x(e)},(r=o)?r.charAt(0).toUpperCase():""))}(t,e)})))])},e}(g()),C=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion;return m(_(),{className:"discussion-row",href:r().route.discussion(t)},[m(M,{discussion:t}),m(P,{discussion:t}),m(S,{discussion:t}),m(N,{discussion:t}),m(L,{discussion:t})])},e}(g()),I=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){return m("li",{className:"CustomDiscussionList-header"},m("div",{className:"DiscussionListItem-info topic"},r().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.topic")),m("div",{className:"DiscussionListItem-info replies"},r().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.replies")),m("div",{className:"DiscussionListItem-info views"},r().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.views")),m("div",{className:"DiscussionListItem-info activity"},r().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.activity")))},e}(g());const O=flarum.core.compat["forum/components/Search"];var H=t.n(O),z=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var r=e.prototype;return r.oninit=function(e){var r,o,n=this;t.prototype.oninit.call(this,e);var i=app.forum;if(this.enabled="1"===i.attribute("vietvan_ca_hero_enabled"),this.enabled){this.mode=this.computeMode(),flarum.extensions["fof-nightmode"]&&this.setupNightModeListener(),this.setupSystemModeListener(),this.setupBodyClassObserver(),setTimeout((function(){var t=n.computeMode();t!==n.mode&&(n.mode=t,m.redraw())}),100),this.locale=app.translator.getLocale()||"en";var a="vietvan_ca_hero_title_"+this.locale,s="vietvan_ca_hero_description_"+this.locale;if(this.title=null!=(r=i.attribute(a))?r:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.title"),this.description=null!=(o=i.attribute(s))?o:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.description"),this.showText="1"===i.attribute("vietvan_ca_hero_show_text"),this.hasCustomColor="1"===i.attribute("vietvan_ca_hero_custom_color_enabled"),this.titleStyle={},this.descriptionStyle={},this.hasCustomColor){var c=i.attribute("vietvan_ca_hero_title_color")||"#ffffff",u=i.attribute("vietvan_ca_hero_subtitle_color")||"#ffffff";this.titleStyle={color:c},this.descriptionStyle={color:u}}}},r.computeMode=function(){var t;if(document.body.classList.contains("flarum--night"))return"dark";var e=app.session.user;if(e){var r=e.preferences().fofNightMode;return 2===r||"2"===r?"dark":1===r||"1"===r||0!==r&&"0"!==r&&null!=r||!window.matchMedia("(prefers-color-scheme: dark)").matches?"light":"dark"}var o=null==(t=document.cookie.split("; ").find((function(t){return t.startsWith("flarum_nightmode=")})))?void 0:t.split("=")[1];return"2"===o?"dark":"1"===o||"0"!==o&&o?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},r.setupNightModeListener=function(){var t=this;this.nightModeHandler=function(e){t.mode="day"===e.detail?"light":"dark",m.redraw()},document.addEventListener("fofnightmodechange",this.nightModeHandler)},r.setupSystemModeListener=function(){var t=this,e=window.matchMedia("(prefers-color-scheme: dark)");this.systemModeHandler=function(e){var r=t.computeMode();r!==t.mode&&(t.mode=r,m.redraw())},e.addEventListener("change",this.systemModeHandler)},r.setupBodyClassObserver=function(){var t=this;this.bodyObserver=new MutationObserver((function(){var e=t.computeMode();e!==t.mode&&(t.mode=e,m.redraw())})),this.bodyObserver.observe(document.body,{attributes:!0,attributeFilter:["class"]})},r.onremove=function(){this.nightModeHandler&&document.removeEventListener("fofnightmodechange",this.nightModeHandler),this.systemModeHandler&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.systemModeHandler),this.bodyObserver&&this.bodyObserver.disconnect()},r.getBackgroundStyle=function(){var t=app.forum,e="dark"===this.mode?"vietvan_ca_hero_background_image_darkUrl":"vietvan_ca_hero_background_imageUrl",r=t.attribute(e);return r?{backgroundImage:"url("+r+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"35vh"}:void 0},r.view=function(){if(!this.enabled)return null;var t=window.location.pathname;if("/"!==t&&""!==t)return null;var e=this.getBackgroundStyle();return m("div",{className:"HeroSection",style:e},this.showText&&m("div",{className:"container"},m("h1",{className:"HeroSection-title",style:this.titleStyle},this.title),m("p",{className:"HeroSection-subtitle",style:this.descriptionStyle},this.description)),m("div",{className:"container"},m(H(),{state:app.search})))},e}(g());flarum.core.compat["common/components/Button"];var B=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var o=e.prototype;return o.oninit=function(e){var o;t.prototype.oninit.call(this,e),this.mode=2===(null==(o=r().session.user)?void 0:o.preferences().fofNightMode)?"dark":"light",flarum.extensions["fof-nightmode"]&&this.setupNightModeListener()},o.setupNightModeListener=function(){var t=this;document.addEventListener("fofnightmodechange",(function(e){t.mode="day"===e.detail?"light":"dark",m.redraw()}))},o.view=function(){var t="dark"===this.mode?"vietvan_ca_logo_darkUrl":"vietvan_ca_logoUrl",e=r().forum.attribute(t);if(!e)return null;var o=r().forum.attribute("vietvan_ca_back_button_custom_url")||r().route("index");return m("a",{href:o,className:"Header-logo CustomHeaderLogo"},m("img",{src:e,alt:"VietVan CA"}))},e}(g());const D=flarum.core.compat["common/components/LinkButton"];var T=t.n(D),E=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var o=e.prototype;return o.view=function(){var t,e=this,o=null==(t=r().search.params())?void 0:t.sort,n=[{key:"latest",label:r().translator.trans("core.forum.index_sort.latest_button"),sortParam:"",default:!0},{key:"top",label:r().translator.trans("core.forum.index_sort.top_button"),sortParam:"top"},{key:"newest",label:r().translator.trans("core.forum.index_sort.newest_button"),sortParam:"newest"},{key:"oldest",label:r().translator.trans("core.forum.index_sort.oldest_button"),sortParam:"oldest"}];return m("div",{className:"CustomDiscussionTabNavigation"},n.map((function(t){var n;return n=t.routeName?r().current.matches(t.routeName):t.isFilter?r().search.params.q&&r().search.params.q.includes(t.filterParam):o===t.sortParam||!o&&t.default,m(T(),{className:"SortItem Button Button--link "+(n?"active":""),onclick:function(){return e.navigateTo(t)}},t.label)})))},o.navigateTo=function(t){var e=m.route.get().split("?")[0];t.default||(e+="?sort="+t.sortParam),m.route.set(e)},e}(g());function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}r().initializers.add("vietvan-ca-themes",(function(){var t,e=function(){!function(){try{var t;if(null!=(t=r().forum)&&t.attribute&&"1"!==r().forum.attribute("vietvan_ca_show_register_button")){var e=document.querySelector(".item-signUp");null==e||e.remove()}}catch(t){console.error("Error checking register button visibility:",t)}}(),function(){try{var t=r().forum.attribute("vietvan_ca_logoUrl"),e=r().forum.attribute("vietvan_ca_logo_darkUrl");if(t||e){var o=document.querySelector(".Header-title");null==o||o.remove()}}catch(t){console.error("Error checking custom logo:",t)}}()};"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,100):document.addEventListener("DOMContentLoaded",(function(){setTimeout(e,100)})),null==(t=r().history.initialized)||t.then((function(){r().history.router.on("changed",e)})),(0,o.extend)(d().prototype,"items",(function(t){var e=r().forum.attribute("vietvan_ca_logoUrl"),o=r().forum.attribute("vietvan_ca_logo_darkUrl");(e||o)&&t.add("logo",m(B,null),90)})),(0,o.extend)(v().prototype,"items",(function(t){t.has("search")&&t.remove("search")})),(0,o.extend)(s().prototype,"view",(function(t){t.children=[m(C,{discussion:this.attrs.discussion})]})),(0,o.extend)(u().prototype,"view",(function(t){var e=t.children;t.children=[m("ul.DiscussionList",[m(I)].concat(e))]})),(0,o.extend)(i().prototype,"view",(function(t){var r=m(z),o=t.children;t.children=[r].concat(o);var n=m(E,null),i=function(t){for(var e,r,o=t,n=function(){var t,e=r.value;if(null==(t=o)||!t.children||!Array.isArray(o.children))return{v:null};var n=o.children.find((function(t){var r;return null==t||null==(r=t.attrs)||null==(r=r.className)?void 0:r.includes(e)}));if(!n)return{v:null};o=n},i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return A(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(["container","sideNavContainer","IndexPage-results","IndexPage-toolbar","IndexPage-toolbar-view"]);!(r=i()).done;)if(e=n())return e.v;return o}({children:o});i?i.children=[n]:console.warn("IndexPage-toolbar-view not found. CustomTabNavigation not added."),setTimeout(e,100)})),function(t){var e=document.getElementById("font-zoom-style");e&&e.remove();var r=document.createElement("style");r.id="font-zoom-style",r.textContent="\n    .App {\n      font-size: 1.05rem !important;\n    }\n    \n    /* Ensure consistent scaling across all text elements */\n    .Post-body,\n    .PostPreview-body,\n    .UserCard-info,\n    .NotificationGrid-content,\n    .Dropdown-menu,\n    .Modal-body,\n    .Form-group label,\n    .Form-group input,\n    .Form-group textarea,\n    .TagLabel,\n    .Badge {\n      font-size: 1.05em !important;\n    }\n    \n    /* Scale headings proportionally */\n    h1 { font-size: 2.1rem !important; }\n    h2 { font-size: "+1.5*t+"rem !important; }\n    h3 { font-size: 1.3125rem !important; }\n    h4 { font-size: "+1.125*t+"rem !important; }\n    h5 { font-size: 1.05rem !important; }\n    h6 { font-size: "+.875*t+"rem !important; }\n    \n    /* Scale code blocks */\n    code,\n    pre {\n      font-size: "+.875*t+"em !important;\n    }\n  ",document.head.appendChild(r),localStorage.setItem("flarum-font-zoom-scale",t.toString())}(1.05)}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map