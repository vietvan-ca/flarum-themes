(()=>{var t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var i=t.n(e);const o=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/IndexPage"];var r=t.n(n);const s=flarum.core.compat["forum/components/DiscussionListItem"];var a=t.n(s);const c=flarum.core.compat["forum/components/DiscussionList"];var u=t.n(c);function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}const p=flarum.core.compat["common/Component"];var v=t.n(p);const f=flarum.core.compat["common/components/Link"];var h=t.n(f);const y=flarum.core.compat["common/helpers/icon"];var b=t.n(y),_=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.firstPost(),o=t.tags()||[],n=t.isSticky(),r=t.isLocked();return m("div.discussion-topic",[m("div.discussion-badges",[n?m("span.Badge.Badge--sticky",[b()("fas fa-thumbtack")]):null,r?m("span.Badge.Badge--locked",[b()("fas fa-lock")]):null]),m("div.discussion-title",[m(h(),{href:i().route.discussion(t)},t.title())]),m("div.discussion-tags",[o.map((function(t){return m("span.discussion-tag",{className:t.color()?"colored":"",style:t.color()?{backgroundColor:t.color()}:{}},t.name())}))]),!1!==i().forum.attribute("custom-discussion-list.enable_excerpts")?m("div.discussion-excerpt",(null==e?void 0:e.contentPlain())||""):null])},e}(v()),g=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){var t,e=null!=(t=this.attrs.discussion.replyCount())?t:0;return m("div.discussion-reply",[m("span",e)])},e}(v()),w=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("views")||0;return m("div.discussion-view",[m("span",t)])},e}(v());function k(t){var e=["color-1","color-2","color-3","color-4","color-5"];return e[t%e.length]}var L=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){var t,e,i,o,n=this.attrs.discussion,r=n.lastPostedAt(),s=r?(t=new Date(r),e=new Date,i=Math.abs(e-t),(o=Math.floor(i/864e5))<1?Math.floor(i/36e5)+"h":o<30?o+"d":Math.floor(o/30)+"mo"):"",a=n.attribute("latestPosters")||[];return m("div.discussion-work",[m("div.time-since",s),m("div.active-users",a.slice(0,5).map((function(t,e){return function(t,e){if(!t)return null;var i,o=t.username||"",n=t.avatar_url;return n?m("span.user-avatar",{title:o},m("img.avatar-image",{src:n,alt:o})):m("span.user-avatar",{title:o},m("span.user-initial",{className:k(e)},(i=o)?i.charAt(0).toUpperCase():""))}(t,e)})))])},e}(v()),N=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){var t=this.attrs.discussion;return m(h(),{className:"discussion-row",href:i().route.discussion(t)},[m(_,{discussion:t}),m(g,{discussion:t}),m(w,{discussion:t}),m(L,{discussion:t})])},e}(v()),x=function(t){function e(){return t.apply(this,arguments)||this}return d(e,t),e.prototype.view=function(){return m("li",{className:"CustomDiscussionList-header"},m("div",{className:"DiscussionListItem-info topic"},i().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.topic")),m("div",{className:"DiscussionListItem-info replies"},i().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.replies")),m("div",{className:"DiscussionListItem-info views"},i().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.views")),m("div",{className:"DiscussionListItem-info activity"},i().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.activity")))},e}(v()),D=function(t){function e(){return t.apply(this,arguments)||this}d(e,t);var i=e.prototype;return i.oninit=function(e){var i,o,n;t.prototype.oninit.call(this,e);var r=app.forum;if(this.enabled="1"===r.attribute("vietvan_ca_hero_enabled"),this.enabled){this.locale=app.translator.getLocale()||"en";var s="vietvan_ca_hero_title_"+this.locale,a="vietvan_ca_hero_description_"+this.locale;this.title=null!=(i=r.attribute(s))?i:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.title"),this.description=null!=(o=r.attribute(a))?o:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.description"),this.showText="1"===r.attribute("vietvan_ca_hero_show_text");var c="dark"==(2===(null==(n=app.session.user)?void 0:n.preferences().fofNightMode)?"dark":"light")?"vietvan_ca_hero_background_image_darkUrl":"vietvan_ca_hero_background_imageUrl",u=r.attribute(c);this.style=u?{backgroundImage:"url("+u+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:void 0}},i.view=function(){if(!this.enabled)return null;var t=window.location.pathname;return"/"!==t&&""!==t?null:m("div",{className:"HeroSection",style:this.style},this.showText&&m("div",{className:"container"},m("h1",{className:"HeroSection-title"},this.title),m("p",{className:"HeroSection-subtitle"},this.description)))},e}(v());i().initializers.add("vietvan-ca-themes",(function(){var t,e=function(){try{if(i().forum&&i().forum.attribute){if("1"!==i().forum.attribute("vietvan_ca_show_register_button")){var t=document.querySelector(".item-signUp");t&&t.remove()}}else console.log("app.forum not ready yet")}catch(t){console.error("Error checking register button visibility:",t)}};"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,100):document.addEventListener("DOMContentLoaded",(function(){setTimeout(e,100)})),null==(t=i().history.initialized)||t.then((function(){i().history.router.on("changed",e)})),(0,o.extend)(a().prototype,"view",(function(t){t.children=[m(N,{discussion:this.attrs.discussion})]})),(0,o.extend)(u().prototype,"view",(function(t){var e=t.children;t.children=[m("ul.DiscussionList",[m(x)].concat(e))]})),(0,o.extend)(r().prototype,"view",(function(t){var i=m(D),o=t.children;t.children=[i].concat(o),setTimeout(e,100)}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map