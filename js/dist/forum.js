(()=>{var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["forum/app"];var s=t.n(e);const i=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/IndexPage"];var n=t.n(o);const r=flarum.core.compat["forum/components/DiscussionListItem"];var a=t.n(r);const c=flarum.core.compat["forum/components/DiscussionList"];var u=t.n(c);function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e)}const d=flarum.core.compat["common/Component"];var v=t.n(d);const f=flarum.core.compat["common/components/Link"];var h=t.n(f);const y=flarum.core.compat["common/helpers/icon"];var _=t.n(y),b=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion,e=t.firstPost(),i=t.tags()||[],o=t.isSticky(),n=t.isLocked();return m("div.discussion-topic",[m("div.discussion-badges",[o?m("span.Badge.Badge--sticky",[_()("fas fa-thumbtack")]):null,n?m("span.Badge.Badge--locked",[_()("fas fa-lock")]):null]),m("div.discussion-title",[m(h(),{href:s().route.discussion(t)},t.title())]),m("div.discussion-tags",[i.map((function(t){return m("span.discussion-tag",{className:t.color()?"colored":"",style:t.color()?{backgroundColor:t.color()}:{}},t.name())}))]),!1!==s().forum.attribute("custom-discussion-list.enable_excerpts")?m("div.discussion-excerpt",(null==e?void 0:e.contentPlain())||""):null])},e}(v()),g=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t,e=null!=(t=this.attrs.discussion.replyCount())?t:0;return m("div.discussion-reply",[m("span",e)])},e}(v()),w=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion.attribute("views")||0;return m("div.discussion-view",[m("span",t)])},e}(v());function k(t){var e=["color-1","color-2","color-3","color-4","color-5"];return e[t%e.length]}var N=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t,e,s,i,o=this.attrs.discussion,n=o.lastPostedAt(),r=n?(t=new Date(n),e=new Date,s=Math.abs(e-t),(i=Math.ceil(s/864e5))<1?Math.floor(s/36e5)+"h":i<30?i+"d":Math.floor(i/30)+"mo"):"",a=o.attribute("latestPosters")||[];return m("div.discussion-work",[m("div.time-since",r),m("div.active-users",a.slice(0,5).map((function(t,e){return function(t,e){if(!t)return null;var s,i=t.username||"",o=t.avatar_url;return o?m("span.user-avatar",{title:i},m("img.avatar-image",{src:o,alt:i})):m("span.user-avatar",{title:i},m("span.user-initial",{className:k(e)},(s=i)?s.charAt(0).toUpperCase():""))}(t,e)})))])},e}(v()),x=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){var t=this.attrs.discussion;return m(h(),{className:"discussion-row",href:s().route.discussion(t)},[m(b,{discussion:t}),m(g,{discussion:t}),m(w,{discussion:t}),m(N,{discussion:t})])},e}(v()),L=function(t){function e(){return t.apply(this,arguments)||this}return p(e,t),e.prototype.view=function(){return m("li",{className:"CustomDiscussionList-header"},m("div",{className:"DiscussionListItem-info topic"},s().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.topic")),m("div",{className:"DiscussionListItem-info replies"},s().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.replies")),m("div",{className:"DiscussionListItem-info views"},s().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.views")),m("div",{className:"DiscussionListItem-info activity"},s().translator.trans("vietvan-ca-flarum-themes.forum.custom-discussion-header.activity")))},e}(v()),D=function(t){function e(){return t.apply(this,arguments)||this}p(e,t);var s=e.prototype;return s.oninit=function(e){var s,i,o;t.prototype.oninit.call(this,e);var n=app.forum;if(this.enabled="1"===n.attribute("vietvan_ca_hero_enabled"),this.enabled){this.locale=app.translator.getLocale()||"en";var r="vietvan_ca_hero_title_"+this.locale,a="vietvan_ca_hero_description_"+this.locale;this.title=null!=(s=n.attribute(r))?s:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.title"),this.description=null!=(i=n.attribute(a))?i:app.translator.trans("vietvan-ca-flarum-themes.forum.hero.description"),this.showText="1"===n.attribute("vietvan_ca_hero_show_text");var c="dark"==(2===(null==(o=app.session.user)?void 0:o.preferences().fofNightMode)?"dark":"light")?"vietvan_ca_hero_background_image_darkUrl":"vietvan_ca_hero_background_imageUrl",u=n.attribute(c);this.style=u?{backgroundImage:"url("+u+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:void 0}},s.view=function(){return this.enabled?m("div",{className:"HeroSection",style:this.style},this.showText&&m("div",{className:"container"},m("h1",{className:"HeroSection-title"},this.title),m("p",{className:"HeroSection-subtitle"},this.description))):null},e}(v());s().initializers.add("vietvan-ca-themes",(function(){(0,i.extend)(a().prototype,"view",(function(t){t.children=[m(x,{discussion:this.attrs.discussion})]})),(0,i.extend)(u().prototype,"view",(function(t){var e=t.children;t.children=[m("ul.DiscussionList",[m(L)].concat(e))]})),(0,i.extend)(n().prototype,"view",(function(t){var e=m(D),s=t.children;t.children=[e].concat(s)}))}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map